(this["webpackJsonptoken-swap-ui"]=this["webpackJsonptoken-swap-ui"]||[]).push([[0],{1053:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(53),c=n.n(o),i=(n(519),n(520),n(339)),u=n(191),s=n(70),l=n(29),d=n(1061),p=n(129),f=n(1056),m=n(12),b=n.n(m),v=n(19),y=n(496),g=n(37),h=n(76),k=n(31),w=n(229),O=n(77),j=n(81),A=n(102),E=n(101),x=n(1057),S=function(e){Object(A.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(O.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){var n=t.target.value;(!isNaN(n)&&/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,r=t.onBlur,a=t.onChange,o=n;"."!==n.charAt(n.length-1)&&"-"!==n||(o=n.slice(0,-1)),a(o.replace(/0*(\d+)/,"$1")),r&&r()},e}return Object(j.a)(n,[{key:"render",value:function(){return a.a.createElement(x.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(a.a.Component),B=n(30),M=n(22),I=(n(636),n(55)),N=n(492),T=n.n(N),C=n(21),F=n.n(C),L=(n(648),function(e){var t=e.address,n=e.style,o=Object(r.useRef)();return Object(r.useEffect)((function(){t&&o.current&&(o.current.innerHTML="",o.current.appendChild(T()((null===n||void 0===n?void 0:n.width)||16,parseInt(F.a.decode(t).toString("hex").slice(5,15),16))))}),[t,n]),a.a.createElement("div",{className:"identicon-wrapper",ref:o,style:e.style})}),K=function(e){var t=Object(g.e)().tokenMap,n=Object(B.g)(t,e.mintAddress);return n?a.a.createElement("img",{alt:"Token icon",key:e.mintAddress,width:"20",height:"20",src:n,style:Object(I.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"1rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):a.a.createElement(L,{address:e.mintAddress,style:Object(I.a)({marginRight:"0.5rem",width:20,height:20,marginTop:2},e.style)})},P=function(e){return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(K,{mintAddress:e.mintA,style:Object(I.a)({marginRight:"-0.5rem"},e.style)}),a.a.createElement(K,{mintAddress:e.mintB}))},W=w.a.Option,q=function(e){var t=Object(M.j)().userAccounts,n=Object(M.g)().pools,r=Object(M.h)(e.mint),o=Object(g.e)(),c=o.tokens,i=o.tokenMap,u=c.map((function(e){return a.a.createElement(W,{key:e.mintAddress,value:e.mintAddress,name:e.tokenSymbol,title:e.mintAddress},a.a.createElement("div",{key:e.mintAddress,style:{display:"flex",alignItems:"center"}},a.a.createElement(K,{mintAddress:e.mintAddress}),e.tokenSymbol))})),s=t.sort((function(e,t){return t.info.amount.toNumber()-e.info.amount.toNumber()})).reduce((function(e,t){var r=t.info.mint.toBase58();if(Object(B.i)(i,r))return e;var a=n.find((function(e){return e&&e.pubkeys.mint.toBase58()===r}));return e.set(r,(e.get(r)||[]).concat([{account:t,pool:a}])),e}),new Map),l=Object(k.a)(s.keys());c.findIndex((function(t){return t.mintAddress===e.mint}))<0&&e.mint&&!s.has(null===e||void 0===e?void 0:e.mint)&&l.push(e.mint);var d=l.map((function(e){var t,n,r,o=s.get(e);o&&o.length>0&&(t=o[0].pool);if(t){n=Object(B.f)(i,t);var c=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();r=a.a.createElement(P,{mintA:c[0],mintB:c[1]})}else n=Object(B.h)(i,e),r=a.a.createElement(K,{mintAddress:e});return a.a.createElement(W,{key:e,value:e,name:n,title:e},a.a.createElement("div",{key:e,style:{display:"flex",alignItems:"center"}},r,n))})),p=function(){var n=null===t||void 0===t?void 0:t.find((function(t){return t.info.mint.toBase58()===e.mint}));return n&&r?n.info.amount.toNumber()/Math.pow(10,r.decimals):0};return a.a.createElement(f.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},a.a.createElement("div",{className:"ccy-input-header"},a.a.createElement("div",{className:"ccy-input-header-left"},e.title),a.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(p())}},"\u4f59\u989d: ",p().toFixed(6))),a.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},a.a.createElement(S,{value:e.amount,onChange:function(t){e.onInputChange&&e.onInputChange(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},placeholder:"0.00"}),a.a.createElement("div",{className:"ccy-input-header-right",style:{display:"felx"}},a.a.createElement(w.a,{size:"large",showSearch:!0,style:{minWidth:120},placeholder:"CCY",value:e.mint,onChange:function(t){e.onMintChange&&e.onMintChange(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[].concat(Object(k.a)(u),Object(k.a)(d))))))},D=n(1058),U=n(59),R=n(58),z=a.a.createContext(null);function G(e){var t=e.children,n=void 0===t?null:t,o=Object(g.d)(),c=Object(g.e)().tokens,i=Object(r.useState)(""),u=Object(l.a)(i,2),d=u[0],p=u[1],f=Object(r.useState)(""),m=Object(l.a)(f,2),y=m[0],h=m[1],k=Object(s.e)(),w=Object(s.f)(),O=Object(r.useState)(""),j=Object(l.a)(O,2),A=j[0],E=j[1],x=Object(r.useState)(""),S=Object(l.a)(x,2),I=S[0],N=S[1],T=Object(r.useState)(""),C=Object(l.a)(T,2),F=C[0],L=C[1],K=Object(M.f)(A),P=Object(M.f)(I),W=Object(M.h)(A),q=Object(M.h)(I),D=Object(U.g)([A,I]),R=Object(r.useState)(U.a.Add),G=Object(l.a)(R,2),X=G[0],H=G[1];Object(r.useEffect)((function(){var e,t,n=(null===(e=c.find((function(e){return e.mintAddress===A})))||void 0===e?void 0:e.tokenSymbol)||A,r=(null===(t=c.find((function(e){return e.mintAddress===I})))||void 0===t?void 0:t.tokenSymbol)||I;if(n&&r&&w.pathname.indexOf("info")<0)k.push({search:"?pair=".concat(n,"-").concat(r)});else{if(!A||!I)return;k.push({search:""})}}),[A,I,c,k,w]),Object(r.useEffect)((function(){var e,t;if(w.search||!A||!I){var n=function(e,t){var n="SOL",r="USDC",a=e.reduce((function(e,t){return e.set(t.tokenSymbol,t),e}),new Map);if(t){var o=new URLSearchParams(t).get("pair");if(o){var c=o.split("-");c.length>1&&((a.has(c[0])||V(c[0]))&&(n=c[0]),(a.has(c[1])||V(c[1]))&&(r=c[1]))}}return{defaultBase:n,defaultQuote:r}}(c,w.search),r=n.defaultBase,a=n.defaultQuote;r&&a&&(E((null===(e=c.find((function(e){return e.tokenSymbol===r})))||void 0===e?void 0:e.mintAddress)||(V(r)?r:"")||""),N((null===(t=c.find((function(e){return e.tokenSymbol===a})))||void 0===t?void 0:t.mintAddress)||(V(a)?a:"")||""))}}),[w,w.search,E,N,c]);var _=Object(r.useCallback)(Object(v.a)(b.a.mark((function e(){var t,n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D&&A&&I)){e.next=6;break}return F===A?(r=A,t=h,n=parseFloat(d)):(r=I,t=p,n=parseFloat(y)),e.next=4,Object(U.c)(o,r,n,D,X);case 4:"string"===typeof(a=e.sent)?t(a):void 0!==a&&Number.isFinite(a)?t(a.toFixed(6)):t("");case 6:case"end":return e.stop()}}),e)}))),[D,A,I,p,h,d,y,o,F,X]);Object(r.useEffect)((function(){_()}),[y,d,F,_]);var Y=function(e,t){return parseFloat(e)*Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0)};return a.a.createElement(z.Provider,{value:{A:{mintAddress:A,account:K,mint:W,amount:d,setAmount:p,setMint:E,convertAmount:function(){return Y(d,W)},sufficientBalance:function(){return void 0!==K&&Object(B.c)(K,W)>=parseFloat(d)}},B:{mintAddress:I,account:P,mint:q,amount:y,setAmount:h,setMint:N,convertAmount:function(){return Y(y,q)},sufficientBalance:function(){return void 0!==P&&Object(B.c)(P,q)>=parseFloat(y)}},setLastTypedAccount:L,setPoolOperation:H}},n)}var X=function(){return Object(r.useContext)(z)},V=function(e){try{return 32===F.a.decode(e).length}catch(t){return!1}};var H=function(e){return"\u60a8\u7684 ".concat(e," \u4f59\u989d\u4e0d\u8db3")},_=function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return t?r.mintAddress?r.amount?a.mintAddress?a.amount?r.sufficientBalance()?o||a.sufficientBalance()?e:H(Object(B.h)(n,a.mintAddress)):H(Object(B.h)(n,r.mintAddress)):"\u5728\u4e0a\u9762\u8f93\u5165\u6570\u91cf":"\u9009\u62e9\u4ee3\u5e01":"\u5728\u4e0a\u9762\u8f93\u5165\u6570\u91cf":"\u9009\u62e9\u4ee3\u5e01":"\u8fde\u63a5\u94b1\u5305"},Y=(n(658),n(198)),Z=n(111),J=n(1060),Q=n(268),$=function(e){var t=e.pool;return(null===t||void 0===t?void 0:t.pubkeys.account)?a.a.createElement(Y.a,{style:Object(I.a)({width:"100%"},e.style)},e.showLabel&&a.a.createElement(Z.a,{span:6},"Address:"),a.a.createElement(Z.a,{span:15},a.a.createElement(Q.a,{address:t.pubkeys.account.toBase58(),code:!0,type:"address"})),a.a.createElement(Z.a,{span:3,style:{display:"flex"}},a.a.createElement(p.a,{shape:"round",icon:a.a.createElement(J.a,null),size:"small",style:{marginLeft:"auto",marginRight:0},onClick:function(){return navigator.clipboard.writeText(t.pubkeys.account.toBase58())}}))):null},ee=a.a.createElement(D.a,{style:{fontSize:24},spin:!0}),te=function(){var e,t,n=Object(h.c)(),o=n.wallet,c=n.connected,i=Object(g.d)(),u=Object(r.useState)(!1),s=Object(l.a)(u,2),d=s[0],f=s[1],m=X(),k=m.A,w=m.B,O=m.setLastTypedAccount,j=m.setPoolOperation,A=Object(U.g)([null===k||void 0===k?void 0:k.mintAddress,null===w||void 0===w?void 0:w.mintAddress]),E=Object(g.f)().slippage,x=Object(g.e)().tokenMap,S=function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.account||!w.mintAddress){e.next=14;break}return e.prev=1,f(!0),t=[{account:k.account,mintAddress:k.mintAddress,amount:k.convertAmount()},{mintAddress:w.mintAddress,amount:w.convertAmount()}],e.next=6,Object(U.e)(i,o,t,E,A);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(R.a)({description:"Please try again and approve transactions from your wallet",message:"Swap trade cancelled.",type:"error"});case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"input-card"},a.a.createElement(q,{title:"\u652f\u4ed8",onInputChange:function(e){j(U.a.SwapGivenInput),k.amount!==e&&O(k.mintAddress),k.setAmount(e)},amount:k.amount,mint:k.mintAddress,onMintChange:function(e){k.setMint(e)}}),a.a.createElement(p.a,{type:"primary",className:"swap-button",onClick:function(){var e=k.mintAddress,t=k.amount;k.setMint(w.mintAddress),k.setAmount(w.amount),w.setMint(e),w.setAmount(t),j((function(e){switch(+e){case U.a.SwapGivenInput:return U.a.SwapGivenProceeds;case U.a.SwapGivenProceeds:case U.a.Add:return U.a.SwapGivenInput}}))}},"\u21c5"),a.a.createElement(q,{title:"\u83b7\u53d6 (\u9884\u4f30)",onInputChange:function(e){j(U.a.SwapGivenProceeds),w.amount!==e&&O(w.mintAddress),w.setAmount(e)},amount:w.amount,mint:w.mintAddress,onMintChange:function(e){w.setMint(e)}}),a.a.createElement($,{pool:A,showLabel:!0})),a.a.createElement(p.a,{className:"trade-button",type:"primary",size:"large",onClick:c?S:o.connect,style:{width:"100%"},disabled:c&&(d||!k.account||!w.mintAddress||k.account===w.account||!k.sufficientBalance()||!A)},_(A?"\u5151\u6362":(e=Object(B.h)(x,k.mintAddress),t=Object(B.h)(x,w.mintAddress),"\u5f53\u524d ".concat(e,"/").concat(t," \u6682\u65f6\u65e0\u4eba\u505a\u5e02")),c,x,k,w,!0),d&&a.a.createElement(y.a,{indicator:ee,className:"trade-spinner"})))},ne=n(279),re=n(17),ae=[{pool:new re.d("ALNzhDhhB1VRuCk5ieofHqdk2wtLGjMfDjaP5t3LGCpv"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("BrMQFZkL1ffHBsiURjmBTd4JDz4ddbTSVi7qfYCkYkNi"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("Gjp8DQoZSCnAbUGRpLUwe1Tgg4iKG6Hjan2EW4ZPoddo"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("6P5wDE2KjzTPu9RE2jZKWLxviqfMkVcnMBv6tQFaf4oB"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("CWuypwJdDi8pxNZ1k4HMUVzk8rtkrBnzqfnmc6y1pci3"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("2gJPRt8a9PNfjU4vFGtq4aH3ud1XY44tk9HvQVyF4eio"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("GfnWGHHfVqvGAF9ovNfqTn9PgV1XL33YSFXjTCZbJS97"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("CibFicoaEmw6CLocb1iDA9Vo6uMDwt75P1rAvUky2dq6"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("tSiGXxfdHisArSPCf3zDRaQGGixYbeUojeNAVQmP1gg"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("AVqsLVPtzNDZyDi2aV5n6tXitQM1wYZu5NDfAHJ9gDwW"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5}]},{pool:new re.d("9jYRpq99v6Gy5VMq5fv6fXN1ZK37kEpqq8P3tEy37y7Z"),airdrops:[{mint:new re.d("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),amount:1e5},{mint:new re.d("GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd"),amount:1e5}]}],oe={},ce=n(132),ie=n(275),ue=new Date("2020-10-27"),se=a.a.createContext(null),le=new ie.a;function de(e){var t=e.children,n=void 0===t?null:t,o=Object(g.e)().endpoint,c=Object(M.g)().pools,i=Object(r.useMemo)((function(){return new Map}),[]),u=Object(r.useMemo)((function(){return new re.b(o,"recent")}),[o]),s=Object(r.useMemo)((function(){return Object(k.a)(new Set(c.map((function(e){return e.pubkeys.holdingMints})).flat()).values()).reduce((function(e,t){var n=t.toBase58(),r=ce.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),a=oe[n],o="".concat(null===r||void 0===r?void 0:r.name,"/USDC"),c=ce.MARKETS.find((function(e){return e.name===o||e.address.toBase58()===a}));return c&&e.set(n,{marketInfo:c}),e}),new Map)}),[c]);Object(r.useEffect)((function(){var e=0,t=function(){var n=Object(v.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,be(u,Object(k.a)(i.keys()));case 2:le.raiseMarketUpdated(new Set(Object(k.a)(s.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(v.a)(b.a.mark((function e(){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(k.a)(s.keys()).forEach((function(e){var t=s.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),r=Object(k.a)(s.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(M.e)(u,r.filter((function(e){return void 0===M.c.get(e)})),"single").then((function(e){var t=e.keys,a=e.array;return r.forEach((function(){})),a.map((function(e,r){var a=t[r],o=n.get(a);if(o){var c=s.get(o);if(c){var i=c.marketInfo.programId,u=c.marketInfo.address;M.c.add(u,e,(function(e,t){var n=ce.Market.getLayout(i).decode(t.data),r={pubkey:e,account:Object(I.a)({},t),info:n};return M.c.registerParser(r.info.baseMint,M.b),M.c.registerParser(r.info.quoteMint,M.b),M.c.registerParser(r.info.bids,fe),M.c.registerParser(r.info.asks,fe),r}))}}return e}))}));case 5:return a=new Set,r.forEach((function(e){var t=M.c.get(e);if(t){var n=t;M.c.get(n.info.baseMint)||a.add(n.info.baseMint.toBase58()),M.c.get(n.info.baseMint)||a.add(n.info.quoteMint.toBase58()),a.add(n.info.bids.toBase58()),a.add(n.info.asks.toBase58())}})),e.next=9,be(u,Object(k.a)(a.keys()));case 9:le.raiseMarketUpdated(new Set(Object(k.a)(s.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[c,s,i,u]);var l=Object(r.useCallback)((function(e){var t;return me(null===(t=s.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[s]),d=Object(r.useCallback)((function(e){var t=s.get(e),n=M.c.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var r=n.info.bids.toBase58(),a=n.info.asks.toBase58();return i.set(r,(i.get(r)||0)+1),i.set(a,(i.get(a)||0)+1),function(){i.set(r,(i.get(r)||0)-1),i.set(a,(i.get(a)||0)-1),Object(k.a)(i.keys()).forEach((function(e){(i.get(e)||0)<=0&&i.delete(e)}))}}),[s,i]);return a.a.createElement(se.Provider,{value:{midPriceInUSD:l,marketEmitter:le,accountsToObserve:i,marketByMint:s,subscribeToMarket:d}},n)}var pe=function(e){var t=Object(r.useContext)(se),n=Object(g.e)().tokenMap,a=Object(r.useState)([]),o=Object(l.a)(a,2),c=o[0],i=o[1],u=null===t||void 0===t?void 0:t.subscribeToMarket,s=null===t||void 0===t?void 0:t.marketEmitter,d=null===t||void 0===t?void 0:t.marketByMint;return Object(r.useEffect)((function(){if(s&&u){var t=Object(k.a)(new Set(Object(k.a)(null===d||void 0===d?void 0:d.keys())).keys()).map((function(e){return u(e)})),r=function(){i(function(e,t,n){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,a){var o,c,i,u=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),s=u[0]===(null===(o=e.pubkeys.holdingMints[0])||void 0===o?void 0:o.toBase58())?0:1,l=0===s?1:0,d=M.c.getAccount(e.pubkeys.holdingAccounts[s]),p=M.c.getMint(u[0]),f=M.c.getAccount(e.pubkeys.holdingAccounts[l]),m=M.c.getMint(u[1]),b=me((null===(c=t.get(u[0]))||void 0===c?void 0:c.marketInfo.address.toBase58())||"",u[0])*Object(B.c)(d,p),v=me((null===(i=t.get(u[1]))||void 0===i?void 0:i.marketInfo.address.toBase58())||"",u[1])*Object(B.c)(f,m),y=M.c.getMint(e.pubkeys.mint);if(!(null===y||void 0===y?void 0:y.supply.eqn(0))){var g=0,h=0,k=function(e,t,n,r){var a=0,o=ae.find((function(t){return t.pool.equals(e.pubkeys.mint)}));o&&(a=o.airdrops.reduce((function(e,a){var o,c=null===(o=t.get(a.mint.toBase58()))||void 0===o?void 0:o.marketInfo.address;if(c){var i=me(null===c||void 0===c?void 0:c.toBase58(),a.mint.toBase58());e+=a.amount*i/(n+r)*(365/30)}return e}),0));return a}(e,t,b,v);if(e.pubkeys.feeAccount){var w=M.c.getAccount(e.pubkeys.feeAccount);if(y&&w&&w.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var O=(null===w||void 0===w?void 0:w.info.amount.toNumber())/(null===y||void 0===y?void 0:y.supply.toNumber());if(0!==(h=.003*(g=(O*b+O*v)/4e-4))){var j=O*b/4e-4,A=O*v/4e-4,E=Math.floor((r.getTime()-ue.getTime())/864e5),x=parseFloat(j/E*.003*356)/b,S=parseFloat(A/E*.003*356)/v;k+=Math.max(x,S)}}}var I=M.c.getMint(e.pubkeys.mint),N=Object(B.f)(n,e),T="#/?pair=".concat(Object(B.f)(n,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:a,name:N,names:u.map((function(e){return Object(B.h)(n,e)})),address:e.pubkeys.mint.toBase58(),link:T,mints:u,liquidityA:Object(B.c)(d,p),liquidityAinUsd:b,liquidityB:Object(B.c)(f,m),liquidityBinUsd:v,supply:I&&((null===I||void 0===I?void 0:I.supply.toNumber())/Math.pow(10,(null===I||void 0===I?void 0:I.decimals)||0)).toFixed(9),fees:h,liquidity:b+v,volume:g,apy:Number.isFinite(k)?k:0,raw:e}}})).filter((function(e){return void 0!==e}))}(e,d,n))},a=s.onMarket(r);return r(),function(){a&&a(),t.forEach((function(e){return e&&e()}))}}}),[n,e,u,s,d]),c};var fe=function(e,t){var n=ce.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(I.a)({},t),info:n}},me=function(e,t){var n,r,a,o,c=ce.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(B.a.has((null===c||void 0===c?void 0:c.name)||""))return 1;if(!e)return 0;var i=M.c.get(e);if(!i)return 0;var u=i.info,s=(null===(n=M.c.get(u.baseMint))||void 0===n?void 0:n.info.decimals)||0,l=(null===(r=M.c.get(u.quoteMint))||void 0===r?void 0:r.info.decimals)||0,d=new ce.Market(u,s,l,void 0,u.programId),p=null===(a=M.c.get(u.bids))||void 0===a?void 0:a.info,f=null===(o=M.c.get(u.asks))||void 0===o?void 0:o.info;if(p&&f){var m=new ce.Orderbook(d,p.accountFlags,p.slab),b=new ce.Orderbook(d,f.accountFlags,f.slab),v=m.getL2(1),y=b.getL2(1);if(v.length>0&&y.length>0)return(v[0][0]+y[0][0])/2}return 0},be=function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(M.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var r=t[n];return M.c.add(new re.d(r),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=n(197),ye=n.n(ve),ge=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return t?[t]:[]}),[t]),o=pe(n),c=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=c.current;return function(){var t=e&&ye.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(r.useEffect)((function(){if(c.current&&0!==o.length){var e=ye.a.getInstanceByDom(c.current);e||(e=ye.a.init(c.current));var t=[{name:o[0].names[0],value:o[0].liquidityAinUsd},{name:o[0].names[1],value:o[0].liquidityBinUsd}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=B.e.format(e.value);return"".concat(e.name,": \n").concat(t)}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,label:{fontSize:14,show:!0,formatter:function(e){var t=B.e.format(e.value);return"".concat(e.name,"\n").concat(t)},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[o]),0===o.length?null:a.a.createElement("div",{ref:c,style:{height:150,width:"100%"}})},he=(n(466),w.a.Option),ke=function(e){var t=Object(r.useState)((e.numerator/e.denominator*100).toString()),n=Object(l.a)(t,2),o=n[0],c=n[1];return a.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},a.a.createElement(S,{className:"slippage-input",size:"small",value:o,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(t){c(t);var n=parseFloat(t);if(Number.isFinite(n)){var r=1e4*n/100;e.set(r,1e4)}}}),"%")},we=function(e){var t=e.options,n=t.tradeFeeNumerator,r=t.tradeFeeDenominator,o=t.ownerTradeFeeNumerator,c=t.ownerTradeFeeDenominator,i=t.ownerWithdrawFeeNumerator,u=t.ownerWithdrawFeeDenominator;return a.a.createElement(f.a,{title:"Pool configuration"},a.a.createElement("div",{className:"pool-settings-grid"},a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"LPs Trading Fee:"),a.a.createElement(ke,{numerator:n,denominator:r,set:function(t,n){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{tradeFeeNumerator:t,tradeFeeDenominator:n}))}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Owner Trading Fee:"),a.a.createElement(ke,{numerator:o,denominator:c,set:function(t,n){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{ownerTradeFeeNumerator:t,ownerTradeFeeDenominator:n}))}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Withdraw Fee:"),a.a.createElement(ke,{numerator:i,denominator:u,set:function(t,n){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{ownerWithdrawFeeNumerator:t,ownerWithdrawFeeDenominator:n}))}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Curve Type:"),a.a.createElement(w.a,{defaultValue:"0",style:{width:200},onChange:function(t){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{curveType:parseInt(t)}))}},a.a.createElement(he,{value:"0"},"Constant Product"),a.a.createElement(he,{value:"1"},"Flat")))))},Oe=n(39),je=a.a.createElement(D.a,{style:{fontSize:24},spin:!0}),Ae=function(){var e=Object(h.c)(),t=e.wallet,n=e.connected,o=Object(g.d)(),c=Object(r.useState)(!1),i=Object(l.a)(c,2),u=i[0],s=i[1],f=X(),m=f.A,k=f.B,w=f.setLastTypedAccount,O=f.setPoolOperation,j=Object(U.g)([null===m||void 0===m?void 0:m.mintAddress,null===k||void 0===k?void 0:k.mintAddress]),A=Object(g.f)().slippage,E=Object(g.e)().tokenMap,x=Object(r.useState)({curveType:0,tradeFeeNumerator:25,tradeFeeDenominator:1e4,ownerTradeFeeNumerator:5,ownerTradeFeeDenominator:1e4,ownerWithdrawFeeNumerator:0,ownerWithdrawFeeDenominator:1e4}),S=Object(l.a)(x,2),B=S[0],M=S[1],I=n?Object(v.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.account&&k.account&&m.mint&&k.mint&&(s(!0),n=[{account:m.account,mintAddress:m.mintAddress,amount:m.convertAmount()},{account:k.account,mintAddress:k.mintAddress,amount:k.convertAmount()}],Object(U.b)(o,t,n,A,j,B).then((function(){s(!1)})).catch((function(e){console.log("Transaction failed",e),Object(R.a)({description:"Please try again and approve transactions from your wallet",message:"Adding liquidity cancelled.",type:"error"}),s(!1)})));case 1:case"end":return e.stop()}}),e)}))):t.connect,N=m.sufficientBalance()&&k.sufficientBalance(),T=Oe.b?a.a.createElement(p.a,{className:"add-button",onClick:I,disabled:n&&(u||!m.account||!k.account||m.account===k.account),type:"primary",size:"large"},_("\u521b\u5efa\u6d41\u52a8\u6027\u6c60",n,E,m,k),u&&a.a.createElement(y.a,{indicator:je,className:"add-spinner"})):a.a.createElement(ne.a.Button,{className:"add-button",onClick:I,disabled:n&&(u||!m.account||!k.account||m.account===k.account),type:"primary",size:"large",overlay:a.a.createElement(we,{options:B,setOptions:M})},_("\u521b\u5efa\u6d41\u52a8\u6027\u6c60",n,E,m,k),u&&a.a.createElement(y.a,{indicator:je,className:"add-spinner"}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"input-card"},a.a.createElement(d.a,{trigger:"hover",content:a.a.createElement("div",{style:{width:300}},"\u6d41\u52a8\u6027\u63d0\u4f9b\u8005\u5728\u6bcf\u4e2a\u4ea4\u6613\u4e2d\u6309\u6d41\u52a8\u6c60\u5360\u6bd4\u8d5a\u53d6\u56fa\u5b9a\u6bd4\u4f8b\u7684\u8d39\u7528\u3002\u8d39\u7528\u4f1a\u5b9e\u65f6\u6dfb\u52a0\u5230\u6c60\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u63d0\u53d6\u6d41\u52a8\u6027\u8d44\u91d1\u6765\u83b7\u53d6\u3002")},a.a.createElement(p.a,{type:"text"},"\u6210\u4e3a\u6d41\u52a8\u6027\u505a\u5e02\u5546\u8d5a\u53d6\u6536\u76ca")),a.a.createElement(q,{title:"\u8f93\u5165",onInputChange:function(e){O(U.a.Add),m.amount!==e&&w(m.mintAddress),m.setAmount(e)},amount:m.amount,mint:m.mintAddress,onMintChange:function(e){m.setMint(e)}}),a.a.createElement("div",null,"+"),a.a.createElement(q,{title:"\u8f93\u5165",onInputChange:function(e){O(U.a.Add),k.amount!==e&&w(k.mintAddress),k.setAmount(e)},amount:k.amount,mint:k.mintAddress,onMintChange:function(e){k.setMint(e)}}),a.a.createElement(ge,{mintAddress:[m.mintAddress,k.mintAddress],pool:j}),a.a.createElement($,{pool:j,style:{marginBottom:10},showLabel:!0})),j&&a.a.createElement(p.a,{className:"add-button",type:"primary",size:"large",onClick:I,disabled:n&&(u||!m.account||!k.account||m.account===k.account||!N)},_("\u63d0\u4f9b\u6d41\u52a8\u6027",n,E,m,k),u&&a.a.createElement(y.a,{indicator:je,className:"add-spinner"})),!j&&T)},Ee=function(){var e=Object(g.f)(),t=e.slippage,n=e.setSlippage,o=100*t,c=Object(r.useState)(o.toString()),i=Object(l.a)(c,2),u=i[0],s=i[1];Object(r.useEffect)((function(){s(o.toString())}),[t,o]);var d={margin:5};return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},[.1,.5,1].map((function(e){return a.a.createElement(p.a,{key:e.toString(),style:d,type:(t=e,t===o?"primary":"default"),onClick:function(){return n(e/100)}},e,"%");var t})),a.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},a.a.createElement(S,{className:"slippage-input",size:"small",placeholder:u,value:u,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(e){s(e);var t=parseFloat(e)/100;Number.isFinite(t)&&n(t)}}),"%"))},xe=function(){var e=Object(h.c)(),t=e.providerUrl,n=e.setProvider,r=Object(g.e)(),o=r.endpoint,c=r.setEndpoint;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,"\u4ea4\u6613\u8bbe\u7f6e:",a.a.createElement("div",null,"\u6ed1\u70b9:",a.a.createElement(Ee,null))),a.a.createElement("div",{style:{display:"grid"}},"\u7f51\u7edc:"," ",a.a.createElement(w.a,{onSelect:c,value:o,style:{marginRight:8}},g.b.map((function(e){var t=e.name,n=e.endpoint;return a.a.createElement(w.a.Option,{value:n,key:n},t)})))),a.a.createElement("div",{style:{display:"grid"}},"\u94b1\u5305:"," ",a.a.createElement(w.a,{onSelect:n,value:t},h.a.map((function(e){var t=e.name,n=e.url;return a.a.createElement(w.a.Option,{value:n,key:n},t)})))))},Se=n(1059),Be=n(169),Me=n(42),Ie=n(130),Ne=function(e){var t=e.instance,n=t.account,o=t.pool,c=Object(r.useState)(!1),i=Object(l.a)(c,2),u=i[0],s=i[1],d=Object(h.c)().wallet,f=Object(g.d)(),m=function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),t=n.info.amount.toNumber(),e.next=5,Object(U.d)(f,d,t,n,o);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(R.a)({description:"Please try again and approve transactions from your wallet",message:"Removing liquidity cancelled.",type:"error"});case 10:return e.prev=10,s(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{type:"default",onClick:m,disabled:u},"\u53d6\u56de"))},Te=(n(972),function(e){var t,n,r=X(),o=r.A,c=r.B,i=e.item,u=Object(M.h)(i.account.info.mint.toBase58()),s=i.account.info.amount.toNumber()/Math.pow(10,(null===u||void 0===u?void 0:u.decimals)||0),l=(null===u||void 0===u?void 0:u.supply.toNumber())||0,d=i.account.info.amount.toNumber()/l,p=d*(null===(t=e.poolDetails)||void 0===t?void 0:t.liquidity),f=d*(null===(n=e.poolDetails)||void 0===n?void 0:n.fees);if(!s)return null;var m,b=i.pool.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return i?a.a.createElement("div",{className:"pool-item-row",onClick:function(){var t,n;o.setMint(null===(t=e.item.pool.pubkeys.holdingMints[0])||void 0===t?void 0:t.toBase58()),c.setMint(null===(n=e.item.pool.pubkeys.holdingMints[1])||void 0===n?void 0:n.toBase58())},title:"LP Token: ".concat(e.item.pool.pubkeys.mint.toBase58())},a.a.createElement(P,{mintA:b[0],mintB:b[1],style:{marginLeft:"0.5rem"}}),a.a.createElement("div",{className:"pool-item-name"},null===(m=e.poolDetails)||void 0===m?void 0:m.name),a.a.createElement("div",{className:"pool-item-amount"},B.e.format(p)),a.a.createElement("div",{className:"pool-item-amount"},B.e.format(f)),a.a.createElement("div",{className:"pool-item-type",title:"Fee account"},i.isFeeAccount?" (F) ":" "),a.a.createElement(Ne,{instance:i})):null}),Ce=function(){var e=Object(U.f)(),t=Object(r.useMemo)((function(){return e.map((function(e){return e.pool}))}),[e]),n=pe(t);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,"\u60a8\u7684\u505a\u5e02"),a.a.createElement(Me.b,{renderEmpty:function(){return a.a.createElement(Ie.a,{image:Ie.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u6d41\u52a8\u6027\u505a\u5e02"})}},a.a.createElement("div",{className:"pools-grid"},a.a.createElement("div",{className:"pool-item-header"},a.a.createElement("div",{style:{width:48}}),a.a.createElement("div",{className:"pool-item-name"},"\u505a\u5e02"),a.a.createElement("div",{className:"pool-item-amount"},"\u8d44\u91d1"),a.a.createElement("div",{className:"pool-item-amount"},"\u6536\u76ca"),a.a.createElement("div",{className:"pool-item-type"}),a.a.createElement("div",null)),e.map((function(e){return a.a.createElement(Te,{key:null===e||void 0===e?void 0:e.account.pubkey.toBase58(),item:e,poolDetails:n.find((function(t){return t.raw===e.pool}))})})))))},Fe=function(e){var t=Object(h.c)().wallet,n=Object(M.i)().account;return t&&t.publicKey?a.a.createElement("div",{className:"wallet-wrapper"},a.a.createElement("span",null,(((null===n||void 0===n?void 0:n.lamports)||0)/re.c).toFixed(6)," SOL"),a.a.createElement("div",{className:"wallet-key"},Object(B.j)("".concat(t.publicKey)),a.a.createElement(L,{address:t.publicKey.toBase58(),style:{marginLeft:"0.5rem"}}))):null},Le=function(e){var t=Object(h.c)(),n=t.connected,r=t.wallet,o=Object(s.f)();return a.a.createElement("div",{className:"App-Bar"},a.a.createElement("div",{className:"App-Bar-left"},a.a.createElement("div",{className:"App-logo"}),a.a.createElement(Be.a,{mode:"horizontal",selectedKeys:[o.pathname]},a.a.createElement(Be.a.Item,{key:"/"},a.a.createElement(u.b,{to:{pathname:"/"}},"SRMSwap")),a.a.createElement(Be.a.Item,{key:"/info"},a.a.createElement(u.b,{to:{pathname:"/info"}},"\u56fe\u8868")),a.a.createElement(Be.a.Item,{key:"trade"},a.a.createElement("a",{href:"https://dex.projectserum.com",target:"_blank",rel:"noopener noreferrer"},"\u4ea4\u6613",a.a.createElement("sup",null,"\u2197"))),a.a.createElement(Be.a.Item,{key:"help"},a.a.createElement("a",{href:"https://serum-academy.com/en/serum-swap/",target:"_blank",rel:"noopener noreferrer"},"\u5e2e\u52a9",a.a.createElement("sup",null,"\u2197")))),e.left),a.a.createElement("div",{className:"App-Bar-right"},a.a.createElement(Fe,null),n&&a.a.createElement(d.a,{placement:"bottomRight",content:a.a.createElement(Ce,null),trigger:"click"},a.a.createElement(p.a,{type:"text"},"\u6211\u7684\u505a\u5e02")),a.a.createElement("div",null,!n&&a.a.createElement(p.a,{type:"text",size:"large",onClick:n?r.disconnect:r.connect,style:{color:"#2abdd2"}},"\u8fde\u63a5\u94b1\u5305"),n&&a.a.createElement(d.a,{placement:"bottomRight",title:"Wallet public key",trigger:"click"})),e.right))},Ke=function(e){var t,n={width:120},o=[{key:"trade",tab:a.a.createElement("div",{style:n},"\u5151\u6362"),render:function(){return a.a.createElement(te,null)}},{key:"pool",tab:a.a.createElement("div",{style:n},"\u505a\u5e02"),render:function(){return a.a.createElement(Ae,null)}}],c=Object(r.useState)(o[0].key),i=Object(l.a)(c,2),u=i[0],s=i[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Le,{right:a.a.createElement(d.a,{placement:"topRight",content:a.a.createElement(xe,null),trigger:"click"},a.a.createElement(p.a,{shape:"circle",size:"large",type:"text",icon:a.a.createElement(Se.a,null)}))}),a.a.createElement(f.a,{className:"exchange-card",headStyle:{padding:0},tabList:o,tabProps:{tabBarGutter:0},activeTabKey:u,onTabChange:function(e){s(e)}},null===(t=o.find((function(e){return e.key===u})))||void 0===t?void 0:t.render()))},Pe=n(1055),We=(n(977),x.a.Search),qe=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(e.val),u=Object(l.a)(i,1)[0];return Object(r.useEffect)((function(){e.val!==u&&(c(e.val>u?"flash-positive":"flash-negative"),setTimeout((function(){return c("")}),200))}),[e.text,e.val,u]),a.a.createElement("span",{className:o},e.text)},De=a.a.memo((function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)((function(){return{liquidity:0,volume:0,fees:0}})),i=Object(l.a)(c,2),u=i[0],s=i[1],f=Object(r.useRef)(null),m=Object(r.useRef)(null),b=Object(U.h)().pools,v=pe(b);Object(r.useEffect)((function(){return f.current&&(m.current=ye.a.init(f.current)),function(){m.current.dispose()}}),[]);var y=Object(r.useMemo)((function(){try{return new RegExp(n,"i")}catch(e){}}),[n]),g=Object(r.useCallback)((function(){m.current&&m.current.setOption({series:[{name:"Liquidity",type:"treemap",top:0,bottom:10,left:30,right:30,animation:!1,label:{show:!0,formatter:"{b}"},itemStyle:{normal:{borderColor:"#000"}},breadcrumb:{show:!1},data:v.filter((function(e){return!n||!y||y.test(e.name)})).map((function(e){return{value:e.liquidity,name:e.name,path:"Liquidity/".concat(e.name),data:e}}))}]})}),[v,n,y]);Object(r.useEffect)((function(){s(v.reduce((function(e,t){return e.liquidity=e.liquidity+t.liquidity,e.volume=e.volume+t.volume,e.fees=e.fees+t.fees,e}),{liquidity:0,volume:0,fees:0})),g()}),[v,g,n]);var h=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,t){return{props:{style:{}},children:a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(P,{mintA:t.mints[0],mintB:t.mints[1]}),a.a.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},e))}}},{title:"\u505a\u5e02",dataIndex:"liquidity",key:"liquidity",render:function(e,t){return{props:{style:{textAlign:"right"}},children:a.a.createElement(qe,{text:B.e.format(t.liquidity),val:t.liquidity})}},sorter:function(e,t){return e.liquidity-t.liquidity},defaultSortOrder:"descend"},{title:"\u4f9b\u5e94\u91cf",dataIndex:"supply",key:"supply",render:function(e,t){return{props:{style:{textAlign:"right"}},children:a.a.createElement(qe,{text:e,val:t.supply})}},sorter:function(e,t){return e.supply-t.supply}},{title:"\u4ea4\u6613\u91cf",dataIndex:"volume",key:"volume",render:function(e,t){return{props:{style:{textAlign:"right"}},children:a.a.createElement(qe,{text:B.e.format(t.volume),val:t.volume})}},sorter:function(e,t){return e.volume-t.volume}},{title:"\u6536\u76ca",dataIndex:"fees",key:"fees",render:function(e,t){return{props:{style:{textAlign:"right"}},children:a.a.createElement(qe,{text:B.e.format(t.fees),val:t.fees})}}},{title:"APY",dataIndex:"apy",key:"apy",render:function(e,t){return{props:{style:{textAlign:"right"}},children:B.d.format(t.apy)}},sorter:function(e,t){return e.apy-t.apy}},{title:"\u5730\u5740",dataIndex:"address",key:"address",render:function(e,t){return{props:{style:{fontFamily:"monospace"}},children:a.a.createElement($,{pool:t.raw})}}}];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Le,{right:a.a.createElement(d.a,{placement:"topRight",title:"Settings",content:a.a.createElement(xe,null),trigger:"click"},a.a.createElement(p.a,{shape:"circle",size:"large",type:"text",icon:a.a.createElement(Se.a,null)}))}),a.a.createElement("div",{className:"info-header"},a.a.createElement("h1",null,"\u603b\u505a\u5e02: ",B.e.format(u.liquidity)),a.a.createElement("h1",null,"\u603b\u4ea4\u6613: ",B.e.format(u.volume)),a.a.createElement(We,{className:"search-input",placeholder:"Filter",type:"search",value:n,onChange:function(e){return o(e.target.value)},onSearch:function(e){return o(e)},style:{width:200}})),a.a.createElement("div",{ref:f,style:{height:"250px",width:"100%"}}),a.a.createElement(Pe.a,{dataSource:v.filter((function(e){return!n||!y||y.test(e.name)})),columns:h,size:"small",pagination:{pageSize:10}}))}));function Ue(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{basename:"/"},a.a.createElement(g.a,null,a.a.createElement(h.b,null,a.a.createElement(M.a,null,a.a.createElement(de,null,a.a.createElement(G,null,a.a.createElement(s.a,{exact:!0,path:"/",component:Ke}),a.a.createElement(s.a,{exact:!0,path:"/info",component:function(){return a.a.createElement(De,null)}}))))))))}var Re=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"Banner"},a.a.createElement("div",{className:"Banner-description"},"SRMSwap\u6682\u672a\u5b8c\u6210\u4ee3\u7801\u5ba1\u8ba1\uff0c\u8bf7\u81ea\u884c\u627f\u62c5\u6f5c\u5728\u98ce\u9669\u3002")),a.a.createElement(Ue,null),a.a.createElement("div",{className:"social-buttons"},a.a.createElement(i.a,{href:"https://github.com/project-serum/oyster-swap","data-color-scheme":"no-preference: light; light: light; dark: light;","data-icon":"octicon-star","data-size":"large","data-show-count":!0,"aria-label":"Star solana-labs/oyster-swap on GitHub"},"Star"),a.a.createElement(i.a,{href:"https://github.com/project-serum/oyster-swap/fork","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","aria-label":"Fork project-serum/oyster-swap on GitHub"},"Fork")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},22:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return L})),n.d(t,"a",(function(){return D})),n.d(t,"i",(function(){return U})),n.d(t,"e",(function(){return R})),n.d(t,"h",(function(){return G})),n.d(t,"j",(function(){return X})),n.d(t,"g",(function(){return V})),n.d(t,"f",(function(){return H}));var r=n(511),a=n(31),o=n(29),c=n(491),i=n(55),u=n(12),s=n.n(u),l=n(19),d=n(0),p=n.n(d),f=n(37),m=n(76),b=n(17),v=n(39),y=n(43),g=n(59),h=n(58),k=n(30),w=n(275),O=p.a.createContext(null),j=new w.a,A=new Map,E=new Map,x=new Map,S=new Map,B=new Map,M=new Map,I=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:return e.abrupt("return",K(n,r));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var t=Object(l.a)(s.a.mark((function t(n,r){var a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return o=e.from(a.data),t.abrupt("return",Y(o));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=function(t,n){var r=e.from(n.data),a=Y(r);return{pubkey:t,account:Object(i.a)({},n),info:a}},C=new Map,F={query:function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,o=a.toBase58(),!(c=M.get(o))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(i=B.get(o))){e.next=8;break}return e.abrupt("return",i);case 8:return i=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return F.add(a,e,r)})),B.set(o,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n){var r=e.toBase58(),a=n||C.get(r);if(!a)throw new Error("Deserializer needs to be registered or passed as a parameter");F.registerParser(e,a),B.delete(r);var o=a(e,t);return M.set(r,o),o},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,M.get(t)},registerParser:function(e,t){C.set(e.toBase58(),t)},queryAccount:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,a=r.toBase58(),!(o=S.get(a))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(c=x.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=I(t,r).then((function(e){return x.delete(a),S.set(a,e),e})),x.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addAccount:function(e,t){var n=K(e,t);return S.set(n.pubkey.toBase58(),n),n},getAccount:function(e){var t;return t="string"!==typeof e?e.toBase58():e,S.get(t)},queryMint:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,a=r.toBase58(),!(o=E.get(a))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(c=A.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=N(t,r).then((function(e){return x.delete(a),E.set(a,e),e})),x.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,E.get(t)},addMint:function(e,t){var n=Y(t.data);return E.set(e.toBase58(),n),n}},L=function(e){var t,n=Object(c.a)(S.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(a){n.e(a)}finally{n.f()}};function K(t,n){var r=e.from(n.data),a=_(r);return{pubkey:t,account:Object(i.a)({},n),info:a}}function P(e,t){if(t)return{pubkey:e,account:t,info:{mint:v.c,owner:e,amount:new y.d(t.lamports),delegate:null,delegatedAmount:new y.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}var W=new Set,q=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return W.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(v.d)().token});case 5:e.sent.value.map((function(e){var t=_(e.account.data);return{pubkey:e.pubkey,account:Object(i.a)({},e.account),info:t}})).forEach((function(e){S.set(e.pubkey.toBase58(),e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function D(t){var n=t.children,r=void 0===n?null:n,c=Object(f.d)(),u=Object(m.c)(),s=u.wallet,l=u.connected,h=Object(d.useState)([]),k=Object(o.a)(h,2),w=k[0],A=k[1],x=Object(d.useState)([]),B=Object(o.a)(x,2),I=B[0],N=B[1],T=function(){var e=Object(f.d)(),t=Object(m.c)().wallet,n=Object(d.useState)(),r=Object(o.a)(n,2),a=r[0],c=r[1];return Object(d.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&c(e)})),e.onAccountChange(t.publicKey,(function(e){e&&c(e)})))}),[c,t,t.publicKey,e]),{nativeAccount:a}}().nativeAccount,C=Object(g.h)().pools,L=Object(d.useCallback)((function(){return Object(a.a)(S.values()).filter((function(e){return e.info.owner.toBase58()===s.publicKey.toBase58()}))}),[s]);Object(d.useEffect)((function(){N([P(s.publicKey,T)].concat(Object(a.a)(w)).filter((function(e){return void 0!==e})))}),[T,s,w]);var K=null===s||void 0===s?void 0:s.publicKey;return Object(d.useEffect)((function(){if(c&&K){q(c,v.a),q(c,K).then((function(){A(L())}));var t=c.onProgramAccountChange(Object(v.d)().token,(function(t){var n=t.accountId;if(t.accountInfo.data.length===y.a.span){var r=_(t.accountInfo.data),a={pubkey:new b.d(t.accountId),account:Object(i.a)({},t.accountInfo),info:r};(W.has(a.info.owner.toBase58())||S.has(n))&&(S.set(n,a),A(L()),j.raiseAccountUpdated(n))}else if(t.accountInfo.data.length===y.b.span){if(E.has(n)){var o=e.from(t.accountInfo.data),c=Y(o);E.set(n,c),j.raiseAccountUpdated(n)}j.raiseAccountUpdated(n)}M.has(n)&&F.add(new b.d(n),t.accountInfo)}),"singleGossip");return function(){c.removeProgramAccountChangeListener(t)}}A([])}),[c,l,K,L]),p.a.createElement(O.Provider,{value:{userAccounts:I,pools:C,nativeAccount:T}},r)}function U(){return{account:Object(d.useContext)(O).nativeAccount}}var R=function(){var t=Object(l.a)(s.a.mark((function t(n,a,o){var c,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(k.b)(a,99).map((function(e){return z(n,e,o)})));case 2:return c=t.sent,u=c.map((function(t){return t.array.map((function(t){var n=t.data,a=Object(r.a)(t,["data"]);return Object(i.a)(Object(i.a)({},a),{},{data:e.from(n[0],"base64")})}))})).flat(),t.abrupt("return",{keys:a,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(s.a.mark((function e(t,n,r){var a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._buildArgs([n],r,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",a);case 3:if(!(o=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+o.error.message);case 6:if(!o.result.value){e.next=9;break}return c=o.result.value,e.abrupt("return",{keys:n,array:c});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function G(e){var t=Object(f.d)(),n=Object(d.useState)(),r=Object(o.a)(n,2),a=r[0],c=r[1];return Object(d.useEffect)((function(){if(e){F.queryMint(t,e).then(c).catch((function(e){return Object(h.a)({message:e.message,type:"error"})}));var n=j.onAccount((function(n){n.id===e&&F.queryMint(t,e).then(c)}));return function(){n()}}}),[t,e]),a}function X(){return{userAccounts:Object(d.useContext)(O).userAccounts}}function V(){return{pools:Object(d.useContext)(O).pools}}var H=function(e){var t=X().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]},_=function(e){var t=y.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=y.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new y.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=y.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=y.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},Y=function(e){if(e.length!==y.b.span)throw new Error("Not a valid Mint");var t=y.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=y.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(65).Buffer)},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),o=n(1054),c=n(30),i=function(e){var t=e.address,n=e.type,r=e.code;return t?a.a.createElement("a",{href:"https://explorer.solana.com/".concat(n,"/").concat(t),target:"_blank",title:t},r?a.a.createElement(o.a.Text,{code:!0},Object(c.j)(t,9)):Object(c.j)(t,9)):null}},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(81),a=n(77),o=n(139),c=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};c.type="AccountUpdate";var i=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};i.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new o.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"onAccount",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseAccountUpdated",value:function(e){this.emitter.emit(c.type,new c(e))}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(i.type,new i(e))}}]),e}()},30:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"j",(function(){return c})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return b}));var r=n(29),a=n(0);function o(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),o=Object(r.a)(n,2),c=o[0],i=o[1],u=Object(a.useCallback)((function(t){c!==t&&(i(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[c,e]);return[c,u]}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function i(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null===(n=e.get(t))||void 0===n?void 0:n.tokenSymbol;return a||(r?"".concat(t.substring(0,5),"..."):t)}function u(e,t){var n;return null===(n=e.get(t))||void 0===n?void 0:n.icon}function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return r.map((function(t){return i(e,t,n)})).join("/")}function l(e,t){return!!e.get(t)}var d=new Set(["USDC","wUSDC","USDT"]);function p(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}function f(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return(null===(n=e.info.amount)||void 0===n?void 0:n.toNumber())/a*r}var m=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),b=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return w})),n.d(t,"c",(function(){return j}));var r=n(31),a=n(12),o=n.n(a),c=n(19),i=n(29),u=n(30),s=n(17),l=n(0),d=n.n(l),p=n(39),f=n(58),m=n(268),b=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"testnet",endpoint:Object(s.h)("testnet")},{name:"devnet",endpoint:Object(s.h)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],v=b[0].endpoint,y=d.a.createContext({endpoint:v,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new s.b(v,"recent"),sendConnection:new s.b(v,"recent"),env:b[0].name,tokens:[],tokenMap:new Map});function g(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(u.k)("connectionEndpts",b[0].endpoint),o=Object(i.a)(a,2),c=o[0],f=o[1],m=Object(u.k)("slippage",.25.toString()),v=Object(i.a)(m,2),g=v[0],h=v[1],k=Object(l.useMemo)((function(){return new s.b(c,"recent")}),[c]),w=Object(l.useMemo)((function(){return new s.b(c,"recent")}),[c]),O=(null===(t=b.find((function(e){return e.endpoint===c})))||void 0===t?void 0:t.name)||b[0].name,j=Object(l.useState)([]),A=Object(i.a)(j,2),E=A[0],x=A[1],S=Object(l.useState)(new Map),B=Object(i.a)(S,2),M=B[0],I=B[1];return Object(l.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(O,".json")).then((function(e){return e.json()})).then((function(e){var t=e.reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);I(t),x(e)}))}),[O]),Object(p.e)(O),Object(l.useEffect)((function(){var e=k.onAccountChange((new s.a).publicKey,(function(){}));return function(){k.removeAccountChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=k.onSlotChange((function(){return null}));return function(){k.removeSlotChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=w.onAccountChange((new s.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),d.a.createElement(y.Provider,{value:{endpoint:c,setEndpoint:f,slippage:parseFloat(g),setSlippage:function(e){return h(e.toString())},connection:k,sendConnection:w,tokens:E,tokenMap:M,env:O}},r)}function h(){return Object(l.useContext)(y).connection}function k(){var e=Object(l.useContext)(y);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}function w(){var e=Object(l.useContext)(y);return{slippage:e.slippage,setSlippage:e.setSlippage}}var O=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,a=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&a.push(t[1])})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(o.a.mark((function e(t,n,a,c){var i,u,l,p,b,v,y,g,h,k=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!(k.length>4&&void 0!==k[4])||k[4],l=new s.f,a.forEach((function(e){return l.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return l.recentBlockhash=e.sent.blockhash,(i=l).setSigners.apply(i,[n.publicKey].concat(Object(r.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&(p=l).partialSign.apply(p,Object(r.a)(c)),e.next=10,n.signTransaction(l);case 10:return l=e.sent,b=l.serialize(),v={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(b,v);case 15:if(y=e.sent,!u){e.next=26;break}return e.next=19,t.confirmTransaction(y,v&&v.commitment);case 19:if(!(null===(g=e.sent.value)||void 0===g?void 0:g.err)){e.next=26;break}return e.next=23,O(t,y);case 23:throw h=e.sent,Object(f.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,h.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(m.a,{address:y,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(y," failed (").concat(JSON.stringify(g),")"));case 26:return e.abrupt("return",y);case 27:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},372:function(e,t){},373:function(e,t){},374:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f}));var r=n(110),a=n(17),o=n(1),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return o.blob(32,e)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64";return o.blob(8,e)},u=o.struct([o.u8("isInitialized"),o.u8("nonce"),c("tokenAccountA"),c("tokenAccountB"),c("tokenPool"),i("feesNumerator"),i("feesDenominator")]),s=o.struct([o.u8("isInitialized"),o.u8("nonce"),c("tokenProgramId"),c("tokenAccountA"),c("tokenAccountB"),c("tokenPool"),c("mintA"),c("mintB"),c("feeAccount"),o.u8("curveType"),i("tradeFeeNumerator"),i("tradeFeeDenominator"),i("ownerTradeFeeNumerator"),i("ownerTradeFeeDenominator"),i("ownerWithdrawFeeNumerator"),i("ownerWithdrawFeeDenominator"),o.blob(16,"padding")]),l=function(t,n,r,c,i,u,s,l,d,p,f,m,b,v,y,g,h){var k=[{pubkey:t.publicKey,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1}],w=o.struct([o.u8("instruction"),o.u8("nonce"),o.u8("curveType"),o.nu64("tradeFeeNumerator"),o.nu64("tradeFeeDenominator"),o.nu64("ownerTradeFeeNumerator"),o.nu64("ownerTradeFeeDenominator"),o.nu64("ownerWithdrawFeeNumerator"),o.nu64("ownerWithdrawFeeDenominator"),o.blob(16,"padding")]),O=e.alloc(1024),j=w.encode({instruction:0,nonce:p,curveType:f,tradeFeeNumerator:m,tradeFeeDenominator:b,ownerTradeFeeNumerator:v,ownerTradeFeeDenominator:y,ownerWithdrawFeeNumerator:g,ownerWithdrawFeeDenominator:h},O);return O=O.slice(0,j),new a.g({keys:k,programId:d,data:O})},d=function(t,n,c,u,s,l,d,p,f,m,b,v,y){var g=o.struct([o.u8("instruction"),i("poolTokenAmount"),i("maximumTokenA"),i("maximumTokenB")]),h=e.alloc(g.span);g.encode({instruction:2,poolTokenAmount:new r.a(b).toBuffer(),maximumTokenA:new r.a(v).toBuffer(),maximumTokenB:new r.a(y).toBuffer()},h);var k=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1}];return new a.g({keys:k,programId:f,data:h})},p=function(t,n,c,u,s,l,d,p,f,m,b,v,y,g){var h=o.struct([o.u8("instruction"),i("poolTokenAmount"),i("minimumTokenA"),i("minimumTokenB")]),k=e.alloc(h.span);h.encode({instruction:3,poolTokenAmount:new r.a(v).toBuffer(),minimumTokenA:new r.a(y).toBuffer(),minimumTokenB:new r.a(g).toBuffer()},k);var w=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0}];return u&&w.push({pubkey:u,isSigner:!1,isWritable:!0}),w.push({pubkey:b,isSigner:!1,isWritable:!1}),new a.g({keys:w,programId:m,data:k})},f=function(t,n,c,u,s,l,d,p,f,m,b,v,y){var g=o.struct([o.u8("instruction"),i("amountIn"),i("minimumAmountOut")]),h=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1}];y&&h.push({pubkey:y,isSigner:!1,isWritable:!0});var k=e.alloc(g.span);return g.encode({instruction:1,amountIn:new r.a(b).toBuffer(),minimumAmountOut:new r.a(v).toBuffer()},k),new a.g({keys:h,programId:f,data:k})}}).call(this,n(65).Buffer)},39:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p}));var r,a,o=n(17),c=new o.d("So11111111111111111111111111111111111111112"),i=new o.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),u=new o.d("".concat("7yLFBZsrs7VWUKp49CyZs9nXaDrES5rSPpDyL3fLFE39")),s=new o.d("HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN");console.debug("Host address: ".concat(null===u||void 0===u?void 0:u.toBase58())),console.debug("Owner address: ".concat(null===s||void 0===s?void 0:s.toBase58()));var l=[{name:"mainnet-beta",swap:function(){return{current:new o.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),legacy:[]}}},{name:"testnet",swap:function(){return{current:new o.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),legacy:[new o.d("9tdctNJuFsYZ6VrKfKEuwwbPp4SFdFw3jYBZU8QUtzeX"),new o.d("CrRvVBS4Hmj47TPU3cMukurpmCUYUrdHYxTQBxncBGqw")]}}},{name:"devnet",swap:function(){return{current:new o.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ"),legacy:[new o.d("H1E1G7eD5Rrcy43xvDxXCsjkRggz7MWNMLGJ8YNzJ8PM"),new o.d("CMoteLxSPVPoc7Drcggf3QPg3ue8WPpxYyZTg77UGqHo"),new o.d("EEuPz4iZA5reBUeZj6x1VzoiHfYeHMppSCnHZasRFhYo")]}}},{name:"localnet",swap:function(){return{current:new o.d("5rdpyt5iGfr68qt28hkefcFyF4WtyhTwqKDmHSBG8GZx"),legacy:[]}}}],d=function(e){var t=l.find((function(t){return t.name===e}));if(t){var n=t.swap();r=n.current,a=n.legacy}},p=function(){return{token:i,swap:r,swap_legacy:a}}},466:function(e,t,n){},514:function(e,t,n){e.exports=n(1053)},519:function(e,t,n){},520:function(e,t,n){},524:function(e,t){},525:function(e,t){},551:function(e,t){},553:function(e,t){},565:function(e,t){},566:function(e,t){},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(343);function c(e){var t=e.message,n=void 0===t?"":t,r=e.description,c=void 0===r?void 0:r,i=e.txid,u=void 0===i?"":i,s=e.type,l=void 0===s?"info":s,d=e.placement,p=void 0===d?"bottomLeft":d;u&&(c=a.a.createElement(a.a.Fragment,null)),o.a[l]({message:a.a.createElement("span",{style:{color:"black"}},n),description:a.a.createElement("span",{style:{color:"black",opacity:.5}},c),placement:p,style:{backgroundColor:"white"}})}},59:function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return O})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return A})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return I}));var r,a=n(31),o=n(29),c=n(12),i=n.n(c),u=n(19),s=n(17),l=n(37),d=n(0),p=n(43),f=n(58),m=n(22),b=n(39),v=n(87),y=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,a,o){var c,u,s,d,y,g,h,k,w,O,j,A;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return Object(f.a)({message:"\u53d6\u56de\u6d41\u52a8\u6027\u8d44\u4ea7...",description:"\u8bf7\u68c0\u67e5\u5e76\u6279\u51c6\u4ea4\u6613",type:"warn"}),c=0,u=0,e.next=7,m.c.queryMint(t,o.pubkeys.mint);case 7:return s=e.sent,e.next=10,m.c.queryAccount(t,o.pubkeys.holdingAccounts[0]);case 10:return d=e.sent,e.next=13,m.c.queryAccount(t,o.pubkeys.holdingAccounts[1]);case 13:if(y=e.sent,s.mintAuthority){e.next=16;break}throw new Error("Mint doesnt have authority");case 16:return g=s.mintAuthority,h=[],k=[],w=[],e.next=22,t.getMinimumBalanceForRentExemption(p.a.span);case 22:return O=e.sent,e.next=25,S(n.publicKey,n.publicKey,k,w,O,d.info.mint,h);case 25:return e.t0=e.sent,e.next=28,S(n.publicKey,n.publicKey,k,w,O,y.info.mint,h);case 28:return e.t1=e.sent,j=[e.t0,e.t1],k.push(p.c.createApproveInstruction(Object(b.d)().token,a.pubkey,g,n.publicKey,[],r)),k.push(Object(v.withdrawInstruction)(o.pubkeys.account,g,o.pubkeys.mint,o.pubkeys.feeAccount,a.pubkey,o.pubkeys.holdingAccounts[0],o.pubkeys.holdingAccounts[1],j[0],j[1],o.pubkeys.program,Object(b.d)().token,r,c,u)),e.next=34,Object(l.c)(t,n,k.concat(w),h);case 34:A=e.sent,Object(f.a)({message:"\u6d41\u52a8\u6027\u8d44\u4ea7\u5df2\u53d6\u56de\uff0c\u611f\u8c22\u60a8\u7684\u652f\u6301\uff01",type:"success",description:"Transaction - ".concat(A)});case 36:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,a,o){var c,u,d,y,g,h,k,w,O,j,A,E,x,B,M;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&r[0].account){e.next=3;break}return Object(f.a)({type:"error",message:"Pool doesn't exsist.",description:"Swap trade cancelled"}),e.abrupt("return");case 3:return u=r[0].amount,d=r[1].amount*(1-a),y=(null===(c=o.pubkeys.holdingMints[0])||void 0===c?void 0:c.toBase58())===r[0].account.info.mint.toBase58()?o.pubkeys.holdingAccounts[0]:o.pubkeys.holdingAccounts[1],g=y===o.pubkeys.holdingAccounts[0]?o.pubkeys.holdingAccounts[1]:o.pubkeys.holdingAccounts[0],e.next=9,m.c.queryMint(t,o.pubkeys.mint);case 9:if((h=e.sent).mintAuthority&&o.pubkeys.feeAccount){e.next=12;break}throw new Error("Mint doesnt have authority");case 12:return k=h.mintAuthority,w=[],O=[],j=[],e.next=18,t.getMinimumBalanceForRentExemption(p.a.span);case 18:return A=e.sent,E=F(w,O,r[0].account,n.publicKey,u+A,j),x=S(n.publicKey,n.publicKey,w,O,A,new s.d(r[1].mintAddress),j),w.push(p.c.createApproveInstruction(Object(b.d)().token,E,k,n.publicKey,[],u)),B=b.a?S(n.publicKey,b.a,w,O,A,o.pubkeys.mint,j):void 0,w.push(Object(v.swapInstruction)(o.pubkeys.account,k,E,y,g,x,o.pubkeys.mint,o.pubkeys.feeAccount,o.pubkeys.program,Object(b.d)().token,u,d,B)),e.next=26,Object(l.c)(t,n,w.concat(O),j);case 26:M=e.sent,Object(f.a)({message:"\u5df2\u6210\u529f\u5151\u6362",type:"success",description:"Transaction - ".concat(M)});case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,a,o,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=7;break}if(c){e.next=3;break}throw new Error("Options are required to create new pool.");case 3:return e.next=5,T(n,t,r,c);case 5:e.next=9;break;case 7:return e.next=9,E(o,r,t,n);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,c){return e.apply(this,arguments)}}(),k=function(e,t){return t.map((function(t){return m.c.queryAccount(e,new s.d(t))}))},w=function(e,t){var n=new s.d(e.data.tokenPool);return{pubkeys:{account:e.pubkey,program:t,mint:n,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB].map((function(e){return new s.d(e)}))},legacy:!1,raw:e}},O=function(){var e=Object(l.d)(),t=Object(d.useState)([]),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(d.useEffect)((function(){c([]);var t=function(){var t=Object(u.a)(i.a.mark((function t(n){var r,o,c,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],o=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===v.TokenSwapLayout.span||e.account.data.length===v.TokenSwapLayoutLegacyV0.span})).map((function(t){var a={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};if(t.account.data.length===v.TokenSwapLayoutLegacyV0.span){a.data=v.TokenSwapLayoutLegacyV0.decode(t.account.data);var c=w(a,n);c.legacy=r,o.push(c),a.init=Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(k(e,[a.data.tokenAccountA,a.data.tokenAccountB]));case 3:n=t.sent,c.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{a.data=v.TokenSwapLayout.decode(t.account.data);var l=w(a,n);l.legacy=r,l.pubkeys.feeAccount=new s.d(a.data.feeAccount),l.pubkeys.holdingMints=[new s.d(a.data.mintA),new s.d(a.data.mintB)],o.push(l)}return a})),c=o.map((function(e){var t;return[].concat(Object(a.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(a.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(m.e)(e,c,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var r=new s.d(t[n]);return e.data.length===p.a.span?m.c.addAccount(r,e):e.data.length===p.b.span?m.c.addMint(r,e):e}))}));case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(b.d)().swap)].concat(Object(a.a)(Object(b.d)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){c(e.flat())}))}),[e]),Object(d.useEffect)((function(){var t=e.onProgramAccountChange(Object(b.d)().swap,function(){var e=Object(u.a)(i.a.mark((function e(t){var n,o,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===v.TokenSwapLayout.span&&(o=t.accountInfo,u={data:v.TokenSwapLayout.decode(o.data),account:o,pubkey:new s.d(n)},(l=r&&r.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&l>=0&&r?(d=r.filter((function(e,t){return t!==l})),c([].concat(Object(a.a)(d),[w(u,Object(b.d)().swap)]))):((p=w(u,Object(b.d)().swap)).pubkeys.feeAccount=new s.d(u.data.feeAccount),p.pubkeys.holdingMints=[new s.d(u.data.mintA),new s.d(u.data.mintB)],c([].concat(Object(a.a)(r),[p]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,r]),{pools:r}},j=function(e){var t=Object(l.d)(),n=Object(m.g)().pools,r=Object(d.useState)(),c=Object(o.a)(r,2),s=c[0],p=c[1],f=Object(d.useMemo)((function(){return Object(a.a)(e).sort()}),Object(a.a)(e));return Object(d.useEffect)((function(){Object(u.a)(i.a.mark((function e(){var r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(void 0),r=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===f[t]}))})),a=0;case 3:if(!(a<r.length)){e.next=14;break}return o=r[a],e.next=7,m.c.queryAccount(t,o.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return p(o),e.abrupt("return");case 11:a++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,f,n]),s},A=function(){var e=Object(m.g)().pools,t=Object(m.j)().userAccounts;return Object(d.useMemo)((function(){var n=t.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(a.a)(e.get(n)||[]),[t])),e}),new Map);return e.filter((function(e){return n.has(e.pubkeys.mint.toBase58())})).map((function(e){var t,r,a=null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58();return null===(r=n.get(e.pubkeys.mint.toBase58()))||void 0===r?void 0:r.map((function(t){return{account:t,isFeeAccount:a===t.pubkey.toBase58(),pool:e}}))})).flat()}),[e,t])};function E(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark((function e(t,n,r,a){var o,c,u,s,d,y,g,h,k,w,O,j,A,E,x,B,M,I,N,T;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(f.a)({message:"\u589e\u52a0\u6d41\u52a8\u6027\u8d44\u4ea7...",description:"\u8bf7\u68c0\u67e5\u5e76\u6279\u51c6\u4ea4\u6613",type:"warn"}),e.next=3,m.c.queryMint(r,t.pubkeys.mint);case 3:if((o=e.sent).mintAuthority){e.next=6;break}throw new Error("Mint doesnt have authority");case 6:if(t.pubkeys.feeAccount){e.next=8;break}throw new Error("Invald fee account");case 8:return e.next=10,m.c.queryAccount(r,t.pubkeys.holdingAccounts[0]);case 10:return c=e.sent,e.next=13,m.c.queryAccount(r,t.pubkeys.holdingAccounts[1]);case 13:if(u=e.sent,s=c.info.amount.toNumber(),d=u.info.amount.toNumber(),y=c.info.mint.toBase58()===n[0].mintAddress?n[0]:n[1],g=y===n[0]?n[1]:n[0],y.account&&g.account){e.next=20;break}throw new Error("Missing account info.");case 20:return h=o.supply.toNumber(),k=o.mintAuthority,w=y.amount,O=g.amount,j=Math.min(.995*w*h/s,.995*O*h/d),A=[],E=[],x=[],e.next=30,r.getMinimumBalanceForRentExemption(p.a.span);case 30:return B=e.sent,M=F(A,E,y.account,a.publicKey,w+B,x),I=F(A,E,g.account,a.publicKey,O+B,x),N=S(a.publicKey,a.publicKey,A,[],B,t.pubkeys.mint,x,new Set([t.pubkeys.feeAccount.toBase58()])),A.push(p.c.createApproveInstruction(Object(b.d)().token,M,k,a.publicKey,[],w)),A.push(p.c.createApproveInstruction(Object(b.d)().token,I,k,a.publicKey,[],O)),A.push(Object(v.depositInstruction)(t.pubkeys.account,k,M,I,t.pubkeys.holdingAccounts[0],t.pubkeys.holdingAccounts[1],t.pubkeys.mint,N,t.pubkeys.program,Object(b.d)().token,j,w,O)),e.next=39,Object(l.c)(r,a,A.concat(E),x);case 39:T=e.sent,Object(f.a)({message:"\u505a\u5e02\u5df2\u6210\u529f\uff0c\u4ea4\u6613\u6109\u5feb\uff01",type:"success",description:"Transaction - ".concat(T)});case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,r,a,o,c,i){var u,s=o.toBase58(),l=Object(m.d)((function(e){return e.info.mint.toBase58()===s&&e.info.owner.toBase58()===t.toBase58()&&(void 0===i||!i.has(e.pubkey.toBase58()))})),d=s===b.c.toBase58();if(l&&!d)u=l.pubkey;else{var f=L(n,e,a,o,t,p.a.span);u=f.publicKey,c.push(f),d&&r.push(p.c.createCloseAccountInstruction(Object(b.d)().token,u,e,e,[]))}return u}function B(e,t,n){return t*n/(e+n)}function M(e,t,n){return n>=t?"Not possible":e*n/(t-n)}function I(e,t,n,r,a){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(i.a.mark((function e(t,n,a,o,c){var u,s,l,d,p,f,b,v,y,g,h,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.c.queryMint(t,o.pubkeys.mint);case 2:return u=e.sent,e.next=5,m.c.queryAccount(t,o.pubkeys.holdingAccounts[0]);case 5:return s=e.sent,e.next=8,m.c.queryAccount(t,o.pubkeys.holdingAccounts[1]);case 8:if(l=e.sent,u.mintAuthority){e.next=11;break}throw new Error("Mint doesnt have authority");case 11:if(!u.supply.eqn(0)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,m.c.queryMint(t,s.info.mint);case 15:return d=e.sent,e.next=18,m.c.queryMint(t,l.info.mint);case 18:if(p=e.sent,d&&p){e.next=21;break}return e.abrupt("return");case 21:f=s.info.mint.toBase58()===n,b=Math.pow(10,f?p.decimals:d.decimals),v=Math.pow(10,f?d.decimals:p.decimals),y=a*v,g=(f?s:l).info.amount.toNumber(),h=(f?l:s).info.amount.toNumber(),e.t0=+c,e.next=e.t0===r.Add?30:e.t0===r.SwapGivenProceeds?32:e.t0===r.SwapGivenInput?34:36;break;case 30:return k=h/g*y,e.abrupt("break",36);case 32:return k=M(h,g,y),e.abrupt("break",36);case 34:return k=B(g,h,y),e.abrupt("break",36);case 36:if("string"!==typeof k){e.next=38;break}return e.abrupt("return",k);case 38:if(void 0!==k){e.next=40;break}return e.abrupt("return",void 0);case 40:return e.abrupt("return",k/b);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,n,r){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(t,n,r,c){var u,d,m,y,g,h,k,w,O,j,A,E,x,S;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(f.a)({message:"\u5efa\u7acb\u65b0\u7684\u8d44\u91d1\u6c60...",description:"\u8bf7\u68c0\u67e5\u5e76\u6279\u51c6\u4ea4\u6613",type:"warn"}),!r.some((function(e){return!e.account}))){e.next=4;break}return Object(f.a)({message:"You need to have balance for all legs in the basket...",description:"Please review inputs.",type:"error"}),e.abrupt("return");case 4:return u=[],d=[],m=new s.a,e.t0=u,e.t1=s.e,e.t2=t.publicKey,e.t3=m.publicKey,e.next=13,n.getMinimumBalanceForRentExemption(p.b.span);case 13:return e.t4=e.sent,e.t5=p.b.span,e.t6=Object(b.d)().token,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),y=new s.a,e.next=22,s.d.findProgramAddress([y.publicKey.toBuffer()],Object(b.d)().swap);case 22:return g=e.sent,h=Object(o.a)(g,2),k=h[0],w=h[1],u.push(p.c.createInitMintInstruction(Object(b.d)().token,m.publicKey,8,k,null)),e.next=29,n.getMinimumBalanceForRentExemption(p.a.span);case 29:return O=e.sent,j=[],A=[],r.forEach((function(e){if(e.account){var n=e.account.info.mint;j.push(L(u,t.publicKey,O,n,k,p.a.span))}})),E=L(u,t.publicKey,O,m.publicKey,t.publicKey,p.a.span),x=L(u,t.publicKey,O,m.publicKey,b.b||t.publicKey,p.a.span),e.next=37,Object(l.c)(n,t,u,[m,E,x].concat(j,Object(a.a)(A)));case 37:return S=e.sent,Object(f.a)({message:"Accounts created",description:"Transaction ".concat(S),type:"success"}),Object(f.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),A=[],u=[],d=[],e.t9=u,e.t10=s.e,e.t11=t.publicKey,e.t12=y.publicKey,e.next=49,n.getMinimumBalanceForRentExemption(v.TokenSwapLayout.span);case 49:return e.t13=e.sent,e.t14=v.TokenSwapLayout.span,e.t15=Object(b.d)().swap,e.t16={fromPubkey:e.t11,newAccountPubkey:e.t12,lamports:e.t13,space:e.t14,programId:e.t15},e.t17=e.t10.createAccount.call(e.t10,e.t16),e.t9.push.call(e.t9,e.t17),r.forEach((function(e,n){if(e.account){var r=F(u,d,e.account,t.publicKey,e.amount+O,A);u.push(p.c.createTransferInstruction(Object(b.d)().token,r,j[n].publicKey,t.publicKey,[],e.amount))}})),u.push(Object(v.createInitSwapInstruction)(y,k,j[0].publicKey,j[1].publicKey,m.publicKey,x.publicKey,E.publicKey,Object(b.d)().token,Object(b.d)().swap,w,c.curveType,c.tradeFeeNumerator,c.tradeFeeDenominator,c.ownerTradeFeeNumerator,c.ownerTradeFeeDenominator,c.ownerWithdrawFeeNumerator,c.ownerWithdrawFeeDenominator)),e.next=59,Object(l.c)(n,t,u.concat(d),[y].concat(Object(a.a)(A)));case 59:S=e.sent,Object(f.a)({message:"Pool Funded. Happy trading.",type:"success",description:"Transaction - ".concat(S)});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n,r,a,o){if(!n.info.isNative)return n.pubkey;var c=new s.a;return e.push(s.e.createAccount({fromPubkey:r,newAccountPubkey:c.publicKey,lamports:a,space:p.a.span,programId:Object(b.d)().token})),e.push(p.c.createInitAccountInstruction(Object(b.d)().token,b.c,c.publicKey,r)),t.push(p.c.createCloseAccountInstruction(Object(b.d)().token,c.publicKey,r,r,[])),o.push(c),c.publicKey}function L(e,t,n,r,a,o){var c=new s.a;return e.push(s.e.createAccount({fromPubkey:t,newAccountPubkey:c.publicKey,lamports:n,space:o,programId:Object(b.d)().token})),e.push(p.c.createInitAccountInstruction(Object(b.d)().token,r,c.publicKey,a)),c}!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(r||(r={}))},636:function(e,t,n){},648:function(e,t,n){},658:function(e,t,n){},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return E}));var r=n(29),a=n(0),o=n.n(a),c=n(488),i=n(58),u=n(37),s=n(30),l=n(12),d=n.n(l),p=n(19),f=n(77),m=n(81),b=n(182),v=n(102),y=n(101),g=n(139),h=n.n(g),k=n(17),w=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e,r){var a;return Object(f.a)(this,n),(a=t.call(this))._publicKey=void 0,a._onProcess=void 0,a._publicKey=null,a._onProcess=!1,a.connect=a.connect.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"signTransaction",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,console.log("solong helper select account"),window.solong.selectAccount().then((function(t){e._publicKey=new k.d(t),console.log("window solong select:",t,"this:",e),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(i.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(h.a),O=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"}],j=o.a.createContext(null);function A(e){var t,n,l=e.children,d=void 0===l?null:l,p=Object(u.e)().endpoint,f=Object(s.k)("walletProvider","https://www.sollet.io"),m=Object(r.a)(f,2),b=m[0],v=m[1],y=Object(a.useMemo)((function(){return console.log("use new provider:",b," endpoint:",p),"http://solongwallet.com"===b?new w(b,p):new c.a(b,p)}),[b,p]),g=Object(a.useState)(!1),h=Object(r.a)(g,2),k=h[0],A=h[1];return Object(a.useEffect)((function(){return console.log("\u6b63\u5728\u8fde\u63a5\u60a8\u7684\u94b1\u5305..."),y.on("connect",(function(){console.log("\u5df2\u8fde\u63a5"),A(!0);var e=y.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(i.a)({message:"\u94b1\u5305\u72b6\u6001",description:"\u5df2\u8fde\u63a5\u5230\u94b1\u5305\uff1a "+t})})),y.on("disconnect",(function(){A(!1),Object(i.a)({message:"\u94b1\u5305\u72b6\u6001",description:"\u5df2\u65ad\u5f00\u94b1\u5305\u8fde\u63a5"})})),function(){y.disconnect(),A(!1)}}),[y]),o.a.createElement(j.Provider,{value:{wallet:y,connected:k,providerUrl:b,setProviderUrl:v,providerName:null!==(t=null===(n=O.find((function(e){return e.url===b})))||void 0===n?void 0:n.name)&&void 0!==t?t:b}},d)}function E(){var e=Object(a.useContext)(j);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},87:function(e,t,n){"use strict";var r=n(372);n.o(r,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return r.TokenSwapLayout})),n.o(r,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return r.TokenSwapLayoutLegacyV0})),n.o(r,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return r.createInitSwapInstruction})),n.o(r,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return r.depositInstruction})),n.o(r,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return r.swapInstruction})),n.o(r,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return r.withdrawInstruction}));var a=n(373);n.o(a,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return a.TokenSwapLayout})),n.o(a,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return a.TokenSwapLayoutLegacyV0})),n.o(a,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return a.createInitSwapInstruction})),n.o(a,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return a.depositInstruction})),n.o(a,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return a.swapInstruction})),n.o(a,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return a.withdrawInstruction}));var o=n(374);n.d(t,"TokenSwapLayout",(function(){return o.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return o.b})),n.d(t,"createInitSwapInstruction",(function(){return o.c})),n.d(t,"depositInstruction",(function(){return o.d})),n.d(t,"swapInstruction",(function(){return o.e})),n.d(t,"withdrawInstruction",(function(){return o.f}))},972:function(e,t,n){},977:function(e,t,n){}},[[514,1,2]]]);