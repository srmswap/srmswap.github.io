(this["webpackJsonptoken-swap-ui"]=this["webpackJsonptoken-swap-ui"]||[]).push([[0],{1053:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(53),o=n.n(c),i=(n(520),n(521),n(339)),u=n(193),s=n(70),l=n(25),d=n(1065),m=n(130),p=n(1056),f=n(12),b=n.n(f),y=n(17),v=n(1054),h=n(497),g=n(34),w=n(72),k=n(31),O=n(231),E=n(77),j=n(82),A=n(103),x=n(102),S=n(1057),N=function(e){Object(A.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,c=n;"."!==n.charAt(n.length-1)&&"-"!==n||(c=n.slice(0,-1)),(n.startsWith(".")||n.startsWith("-."))&&(c=c.replace(".","0.")),r(c.replace(/0*(\d+)/,"$1")),a&&a()},e}return Object(j.a)(n,[{key:"render",value:function(){return r.a.createElement(S.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(r.a.Component),B=n(19),M=n(22),I=(n(637),n(56)),F=n(493),T=n.n(F),C=n(23),q=n.n(C),K=(n(649),function(e){var t=e.address,n=e.style,c=Object(a.useRef)();return Object(a.useEffect)((function(){t&&c.current&&(c.current.innerHTML="",c.current.className=e.className||"",c.current.appendChild(T()((null===n||void 0===n?void 0:n.width)||16,parseInt(q.a.decode(t).toString("hex").slice(5,15),16))))}),[t,n,e.className]),r.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),P=function(e){var t=Object(g.e)().tokenMap,n=Object(B.i)(t,e.mintAddress);return n?r.a.createElement("img",{alt:"Token icon",className:e.className,key:e.mintAddress,width:"20",height:"20",src:n,style:Object(I.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"1rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):r.a.createElement(K,{address:e.mintAddress,style:Object(I.a)({marginRight:"0.5rem",display:"flex",alignSelf:"center",width:20,height:20,marginTop:2},e.style)})},L=function(e){return r.a.createElement("div",{className:e.className,style:{display:"flex"}},r.a.createElement(P,{mintAddress:e.mintA,style:Object(I.a)({marginRight:"-0.5rem"},e.style)}),r.a.createElement(P,{mintAddress:e.mintB}))},W=O.a.Option,z=function(e){var t=e.showBalance,n=e.mintAddress,a=e.name,c=e.icon,o=Object(M.h)(n),i=Object(M.f)(n),u=0,s=!1;return t&&i&&o&&(s=(u=i.info.amount.toNumber()/Math.pow(10,o.decimals))>0),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{title:n,key:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c||r.a.createElement(P,{mintAddress:n}),a),t?r.a.createElement("span",{title:u.toString(),key:n,className:"token-balance"},"\xa0 ",s&&u<.001?"<0.001":u.toFixed(3)):null))},D=function(e){var t=Object(M.j)().userAccounts,n=Object(M.g)().pools,a=Object(M.h)(e.mint),c=Object(g.e)(),o=c.tokens,i=c.tokenMap,u=o.map((function(e){return r.a.createElement(W,{key:e.mintAddress,value:e.mintAddress,name:e.tokenSymbol,title:e.mintAddress},r.a.createElement(z,{key:e.mintAddress,name:e.tokenSymbol,mintAddress:e.mintAddress,showBalance:!0}))})),s=t.sort((function(e,t){return t.info.amount.toNumber()-e.info.amount.toNumber()})).reduce((function(e,t){var a=t.info.mint.toBase58();if(Object(B.k)(i,a))return e;var r=n.find((function(e){return e&&e.pubkeys.mint.toBase58()===a}));return e.set(a,(e.get(a)||[]).concat([{account:t,pool:r}])),e}),new Map),l=Object(k.a)(s.keys());o.findIndex((function(t){return t.mintAddress===e.mint}))<0&&e.mint&&!s.has(null===e||void 0===e?void 0:e.mint)&&l.push(e.mint);var d=l.map((function(e){var t,n,a,c=s.get(e);c&&c.length>0&&(t=c[0].pool);if(t){n=Object(B.h)(i,t);var o=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();a=r.a.createElement(L,{mintA:o[0],mintB:o[1]})}else n=Object(B.j)(i,e,!0,3),a=r.a.createElement(P,{mintAddress:e});return r.a.createElement(W,{key:e,value:e,name:n},r.a.createElement(z,{key:e,mintAddress:e,name:n,icon:a,showBalance:!t}))})),m=function(){var n=null===t||void 0===t?void 0:t.find((function(t){return t.info.mint.toBase58()===e.mint}));return n&&a?n.info.amount.toNumber()/Math.pow(10,a.decimals):0};return r.a.createElement(p.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},r.a.createElement("div",{className:"ccy-input-header"},r.a.createElement("div",{className:"ccy-input-header-left"},e.title),r.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(m())}},"\u4f59\u989d: ",m().toFixed(6))),r.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},r.a.createElement(N,{value:e.amount,onChange:function(t){e.onInputChange&&e.onInputChange(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},placeholder:"0.00"}),r.a.createElement("div",{className:"ccy-input-header-right",style:{display:"felx"}},r.a.createElement(O.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:e.mint,onChange:function(t){e.onMintChange&&e.onMintChange(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[].concat(Object(k.a)(u),Object(k.a)(d))))))},U=n(1061),R=n(1059),G=n(1058),_=n(54),V=n(59),H=r.a.createContext(null),J=function(e){var t=Object(g.e)().tokenMap,n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(e||""),u=Object(l.a)(i,2),s=u[0],d=u[1],m=Object(M.f)(s),p=Object(M.h)(s);return Object(a.useMemo)((function(){return{mintAddress:s,account:m,mint:p,amount:c,name:Object(B.j)(t,s),icon:Object(B.i)(t,s),setAmount:o,setMint:d,convertAmount:function(){return function(e,t){return parseFloat(e)*Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0)}(c,p)},sufficientBalance:function(){return void 0!==m&&Object(B.c)(m,p)>=parseFloat(c)}}}),[s,m,p,c,t,o,d])};function Y(e){var t=e.children,n=void 0===t?null:t,c=Object(g.d)(),o=Object(g.e)().tokens,i=Object(s.e)(),u=Object(s.f)(),d=Object(a.useState)(""),m=Object(l.a)(d,2),p=m[0],f=m[1],v=Object(a.useState)(_.b.Add),h=Object(l.a)(v,2),w=h[0],k=h[1],O=J(),E=O.mintAddress,j=O.setMint,A=O.amount,x=O.setAmount,S=J(),N=S.mintAddress,B=S.setMint,M=S.amount,I=S.setAmount,F=Object(_.h)([O.mintAddress,S.mintAddress]);Object(a.useEffect)((function(){var e,t,n=(null===(e=o.find((function(e){return e.mintAddress===E})))||void 0===e?void 0:e.tokenSymbol)||E,a=(null===(t=o.find((function(e){return e.mintAddress===N})))||void 0===t?void 0:t.tokenSymbol)||N;document.title="Swap | Serum (".concat(n,"/").concat(a,")")}),[E,N,o,u]),Object(a.useEffect)((function(){var e,t,n=(null===(e=o.find((function(e){return e.mintAddress===E})))||void 0===e?void 0:e.tokenSymbol)||E,a=(null===(t=o.find((function(e){return e.mintAddress===N})))||void 0===t?void 0:t.tokenSymbol)||N;if(n&&a&&u.pathname.indexOf("info")<0)i.push({search:"?pair=".concat(n,"-").concat(a)});else{if(!E||!N)return;i.push({search:""})}}),[E,N,o,i,u.pathname]),Object(a.useEffect)((function(){var e,t;if(u.search||!E||!N){var n=function(e,t){var n="SOL",a="USDC",r=e.reduce((function(e,t){return e.set(t.tokenSymbol,t),e}),new Map);if(t){var c=new URLSearchParams(t).get("pair");if(c){var o=c.split("-");o.length>1&&((r.has(o[0])||Q(o[0]))&&(n=o[0]),(r.has(o[1])||Q(o[1]))&&(a=o[1]))}}return{defaultBase:n,defaultQuote:a}}(o,u.search),a=n.defaultBase,r=n.defaultQuote;a&&r&&(j((null===(e=o.find((function(e){return e.tokenSymbol===a})))||void 0===e?void 0:e.mintAddress)||(Q(a)?a:"")||""),B((null===(t=o.find((function(e){return e.tokenSymbol===r})))||void 0===t?void 0:t.mintAddress)||(Q(r)?r:"")||""))}}),[u,u.search,j,B,o]);var T=Object(a.useCallback)(Object(y.a)(b.a.mark((function e(){var t,n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(F&&E&&N)){e.next=6;break}return p===E?(a=E,t=I,n=parseFloat(A)):(a=N,t=x,n=parseFloat(M)),e.next=4,Object(_.d)(c,a,n,F,w);case 4:"string"===typeof(r=e.sent)?t(r):void 0!==r&&Number.isFinite(r)?t(r.toFixed(6)):t("");case 6:case"end":return e.stop()}}),e)}))),[F,E,N,x,I,A,M,c,p,w]);return Object(a.useEffect)((function(){T()}),[M,A,p,T]),r.a.createElement(H.Provider,{value:{A:O,B:S,lastTypedAccount:p,setLastTypedAccount:f,setPoolOperation:k}},n)}var Z=function(){return Object(a.useContext)(H)},Q=function(e){try{return 32===q.a.decode(e).length}catch(t){return!1}};var X=function(e){return"\u60a8\u7684 ".concat(e," \u4f59\u989d\u4e0d\u8db3")},$=function(e,t,n,a,r){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return t?a.mintAddress?a.amount?r.mintAddress?r.amount?a.sufficientBalance()?c||r.sufficientBalance()?e:X(Object(B.j)(n,r.mintAddress)):X(Object(B.j)(n,a.mintAddress)):"\u5728\u4e0a\u9762\u8f93\u5165\u6570\u91cf":"\u9009\u62e9\u4ee3\u5e01":"\u5728\u4e0a\u9762\u8f93\u5165\u6570\u91cf":"\u9009\u62e9\u4ee3\u5e01":"\u8fde\u63a5\u94b1\u5305"},ee=(n(659),n(199)),te=n(112),ne=n(1064),ae=n(1062),re=n(149),ce=function(e){return r.a.createElement(ee.a,{style:Object(I.a)({width:"100%"},e.style)},e.label&&r.a.createElement(te.a,{span:4},e.label,":"),r.a.createElement(te.a,{span:17},r.a.createElement(re.a,{address:e.address,code:!0,type:"address"})),r.a.createElement(te.a,{span:3,style:{display:"flex"}},r.a.createElement(m.a,{shape:"round",icon:r.a.createElement(ne.a,null),size:"small",style:{marginLeft:"auto",marginRight:0},onClick:function(){return navigator.clipboard.writeText(e.address)}})))},oe=function(e){var t=e.pool,n=e.label||"Address";return(null===t||void 0===t?void 0:t.pubkeys.account)?r.a.createElement(ce,{address:t.pubkeys.account.toBase58(),style:e.style,label:n}):null},ie=function(e){var t=e.pool,n=null===t||void 0===t?void 0:t.pubkeys.holdingAccounts[0],a=null===t||void 0===t?void 0:t.pubkeys.holdingAccounts[1];return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(ce,{address:n.toBase58(),style:e.style,label:e.aName}),a&&r.a.createElement(ce,{address:a.toBase58(),style:e.style,label:e.bName}))},ue=function(e){var t=e.pool,n=e.aName,a=e.bName;return r.a.createElement(d.a,{placement:"topRight",title:"\u5730\u5740",trigger:"hover",content:r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{pool:t,showLabel:!0,label:"Pool"}),r.a.createElement(ie,{pool:t,aName:n,bName:a}))},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",className:"trade-address-info-button",icon:r.a.createElement(ae.a,null)}))},se=[],le={},de=n(133),me=n(20),pe=n(275),fe=new Date("2020-10-27"),be=r.a.createContext(null),ye=new pe.a;function ve(e){var t=e.children,n=void 0===t?null:t,c=Object(g.e)().endpoint,o=Object(M.g)().pools,i=Object(a.useMemo)((function(){return new Map}),[]),u=Object(a.useState)(new Map),s=Object(l.a)(u,2),d=s[0],m=s[1],p=Object(a.useMemo)((function(){return new me.b(c,"recent")}),[c]),f=Object(a.useMemo)((function(){return Object(k.a)(new Set(o.map((function(e){return e.pubkeys.holdingMints})).flat()).values()).reduce((function(e,t){var n=t.toBase58(),a=de.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=le[n],c="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=de.MARKETS.find((function(e){return e.name===c||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[o]);Object(a.useEffect)((function(){var e=0,t=0,n=function(){var t=Object(y.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ke(p,Object(k.a)(i.keys()));case 2:ye.raiseMarketUpdated(new Set(Object(k.a)(f.keys()))),e=window.setTimeout((function(){return n()}),3e4);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var e=Object(y.a)(b.a.mark((function e(){var n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("https://serum-api.bonfida.com/pools-recent");case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=(null===r||void 0===r?void 0:r.data).reduce((function(e,t){return e.set(t.pool_identifier,t),e}),new Map),m(c),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:t=window.setTimeout((function(){return a()}),18e5);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return function(){var e=Object(y.a)(b.a.mark((function e(){var t,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,Object(k.a)(f.keys()).forEach((function(e){var n=f.get(e);n&&t.set(n.marketInfo.address.toBase58(),e)})),r=Object(k.a)(f.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(M.e)(p,r.filter((function(e){return void 0===M.c.get(e)})),"single").then((function(e){var n=e.keys,a=e.array;return r.forEach((function(){})),a.map((function(e,a){var r=n[a],c=t.get(r);if(c){var o=f.get(c);if(o){var i=o.marketInfo.programId,u=o.marketInfo.address;M.c.add(u,e,(function(e,t){var n=de.Market.getLayout(i).decode(t.data),a={pubkey:e,account:Object(I.a)({},t),info:n};return M.c.registerParser(a.info.baseMint,M.b),M.c.registerParser(a.info.quoteMint,M.b),M.c.registerParser(a.info.bids,ge),M.c.registerParser(a.info.asks,ge),a}))}}return e}))}));case 5:return c=new Set,r.forEach((function(e){var t=M.c.get(e);if(t){var n=t;M.c.get(n.info.baseMint)||c.add(n.info.baseMint.toBase58()),M.c.get(n.info.baseMint)||c.add(n.info.quoteMint.toBase58()),c.add(n.info.bids.toBase58()),c.add(n.info.asks.toBase58())}})),e.next=9,ke(p,Object(k.a)(c.keys()));case 9:ye.raiseMarketUpdated(new Set(Object(k.a)(f.keys()))),n(),a();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(t),window.clearTimeout(e)}}),[o,f,i,p]);var v=Object(a.useCallback)((function(e){var t;return we(null===(t=f.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[f]),h=Object(a.useCallback)((function(e){var t=f.get(e),n=M.c.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return i.set(a,(i.get(a)||0)+1),i.set(r,(i.get(r)||0)+1),function(){i.set(a,(i.get(a)||0)-1),i.set(r,(i.get(r)||0)-1),Object(k.a)(i.keys()).forEach((function(e){(i.get(e)||0)<=0&&i.delete(e)}))}}),[f,i]);return r.a.createElement(be.Provider,{value:{midPriceInUSD:v,marketEmitter:ye,accountsToObserve:i,marketByMint:f,subscribeToMarket:h,dailyVolume:d}},n)}var he=function(e){var t=Object(a.useContext)(be),n=Object(g.e)().tokenMap,r=Object(a.useState)([]),c=Object(l.a)(r,2),o=c[0],i=c[1],u=null===t||void 0===t?void 0:t.subscribeToMarket,s=null===t||void 0===t?void 0:t.marketEmitter,d=null===t||void 0===t?void 0:t.marketByMint,m=null===t||void 0===t?void 0:t.dailyVolume;return Object(a.useEffect)((function(){if(s&&u){var t=Object(k.a)(new Set(Object(k.a)(null===d||void 0===d?void 0:d.keys())).keys()).map((function(e){return u(e)})),a=function(){i(function(e,t,n,a){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,c){var o,i,u,s,l=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),d=l[0]===(null===(o=e.pubkeys.holdingMints[0])||void 0===o?void 0:o.toBase58())?0:1,m=0===d?1:0,p=M.c.getAccount(e.pubkeys.holdingAccounts[d]),f=M.c.getMint(l[0]),b=M.c.getAccount(e.pubkeys.holdingAccounts[m]),y=M.c.getMint(l[1]),v=we((null===(i=t.get(l[0]))||void 0===i?void 0:i.marketInfo.address.toBase58())||"",l[0]),h=v*Object(B.c)(p,f),g=we((null===(u=t.get(l[1]))||void 0===u?void 0:u.marketInfo.address.toBase58())||"",l[1])*Object(B.c)(b,y),w=M.c.getMint(e.pubkeys.mint);if(!(null===w||void 0===w?void 0:w.supply.eqn(0))){var k=function(e,t,n,a){var r=0,c=se.find((function(t){return t.pool.equals(e.pubkeys.mint)}));c&&(r=c.airdrops.reduce((function(e,r){var c,o=null===(c=t.get(r.mint.toBase58()))||void 0===c?void 0:c.marketInfo.address;if(o){var i=we(null===o||void 0===o?void 0:o.toBase58(),r.mint.toBase58());e+=r.amount*i/(n+a)*(365/30)}return e}),0));return r}(e,t,h,g),O=0,E=v*((null===n||void 0===n||null===(s=n.get(e.pubkeys.mint.toBase58()))||void 0===s?void 0:s.volume24hA)||0),j=.0025*E,A=0,x=k,S=k;if(e.pubkeys.feeAccount){var N=M.c.getAccount(e.pubkeys.feeAccount);if(w&&N&&N.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var I=(null===N||void 0===N?void 0:N.info.amount.toNumber())/(null===w||void 0===w?void 0:w.supply.toNumber());if(0!==(A=.003*(O=(I*h+I*g)/4e-4))){var F=I*h/4e-4,T=I*g/4e-4,C=Math.floor((r.getTime()-fe.getTime())/864e5),q=parseFloat(F/C*.003*356)/h,K=parseFloat(T/C*.003*356)/g;x+=Math.max(q,K),S+=parseFloat(.003*E*356)/h}}}var P=M.c.getMint(e.pubkeys.mint),L=Object(B.h)(a,e),W="#/?pair=".concat(Object(B.h)(a,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:c,name:L,names:l.map((function(e){return Object(B.j)(a,e)})),address:e.pubkeys.mint.toBase58(),link:W,mints:l,liquidityA:Object(B.c)(p,f),liquidityAinUsd:h,liquidityB:Object(B.c)(b,y),liquidityBinUsd:g,supply:P&&((null===P||void 0===P?void 0:P.supply.toNumber())/Math.pow(10,(null===P||void 0===P?void 0:P.decimals)||0)).toFixed(9),fees:A,fees24h:j,liquidity:h+g,volume:O,volume24h:E,apy:Number.isFinite(x)?x:0,apy24h:Number.isFinite(S)?S:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,d,m,n))},r=s.onMarket(a);return a(),function(){r&&r(),t.forEach((function(e){return e&&e()}))}}}),[n,e,m,u,s,d]),o};var ge=function(e,t){var n=de.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(I.a)({},t),info:n}},we=function(e,t){var n,a,r,c,o=de.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(B.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var i=M.c.get(e);if(!i)return 0;var u=i.info,s=(null===(n=M.c.get(u.baseMint))||void 0===n?void 0:n.info.decimals)||0,l=(null===(a=M.c.get(u.quoteMint))||void 0===a?void 0:a.info.decimals)||0,d=new de.Market(u,s,l,void 0,u.programId),m=null===(r=M.c.get(u.bids))||void 0===r?void 0:r.info,p=null===(c=M.c.get(u.asks))||void 0===c?void 0:c.info;if(m&&p){var f=new de.Orderbook(d,m.accountFlags,m.slab),b=new de.Orderbook(d,p.accountFlags,p.slab),y=f.getL2(1),v=b.getL2(1);if(y.length>0&&v.length>0)return(y[0][0]+v[0][0])/2}return 0},ke=function(){var e=Object(y.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(M.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return M.c.add(new me.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=v.a.Text,Ee=r.a.createElement(U.a,{style:{fontSize:24},spin:!0}),je=function(){var e,t,n=Object(w.c)(),c=n.wallet,o=n.connected,i=Object(g.d)(),u=Object(a.useState)(!1),s=Object(l.a)(u,2),d=s[0],p=s[1],f=Z(),v=f.A,k=f.B,O=f.setLastTypedAccount,E=f.setPoolOperation,j=Object(_.h)([null===v||void 0===v?void 0:v.mintAddress,null===k||void 0===k?void 0:k.mintAddress]),A=Object(g.f)().slippage,x=Object(g.e)().tokenMap,S=function(){var e=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.account||!k.mintAddress){e.next=14;break}return e.prev=1,p(!0),t=[{account:v.account,mintAddress:v.mintAddress,amount:v.convertAmount()},{mintAddress:k.mintAddress,amount:k.convertAmount()}],e.next=6,Object(_.f)(i,c,t,A,j);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(V.a)({description:"\u8bf7\u68c0\u67e5\u60a8\u7684\u94b1\u5305\u662f\u5426\u6dfb\u52a0\u76f8\u5173\u4ee3\u5e01\u5e76\u91cd\u8bd5",message:"\u5151\u6362\u4ea4\u6613\u88ab\u53d6\u6d88",type:"error"});case 11:return e.prev=11,p(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-card"},r.a.createElement(ue,{pool:j,aName:v.name,bName:k.name}),r.a.createElement(D,{title:"\u652f\u4ed8",onInputChange:function(e){E(_.b.SwapGivenInput),v.amount!==e&&O(v.mintAddress),v.setAmount(e)},amount:v.amount,mint:v.mintAddress,onMintChange:function(e){v.setMint(e)}}),r.a.createElement(m.a,{type:"primary",className:"swap-button",onClick:function(){var e=v.mintAddress,t=v.amount;v.setMint(k.mintAddress),v.setAmount(k.amount),k.setMint(e),k.setAmount(t),E((function(e){switch(+e){case _.b.SwapGivenInput:return _.b.SwapGivenProceeds;case _.b.SwapGivenProceeds:case _.b.Add:return _.b.SwapGivenInput}}))}},"\u21c5"),r.a.createElement(D,{title:"\u83b7\u53d6 (\u9884\u4f30)",onInputChange:function(e){E(_.b.SwapGivenProceeds),k.amount!==e&&O(k.mintAddress),k.setAmount(e)},amount:k.amount,mint:k.mintAddress,onMintChange:function(e){k.setMint(e)}})),r.a.createElement(m.a,{className:"trade-button",type:"primary",size:"large",onClick:o?S:c.connect,style:{width:"100%"},disabled:o&&(d||!v.account||!k.mintAddress||v.account===k.account||!v.sufficientBalance()||!j)},$(j?"\u5151\u6362":(e=Object(B.j)(x,v.mintAddress),t=Object(B.j)(x,k.mintAddress),"\u5f53\u524d ".concat(e,"/").concat(t," \u6682\u65e0\u4eba\u505a\u5e02")),o,x,v,k,!0),d&&r.a.createElement(h.a,{indicator:Ee,className:"trade-spinner"})),r.a.createElement(Ae,{pool:j}))},Ae=function(e){var t=Z(),n=t.A,c=t.B,o=t.lastTypedAccount,i=e.pool,u=Object(g.f)().slippage,s=Object(a.useMemo)((function(){return i?[i]:[]}),[i]),p=he(s),f=Object(a.useState)(0),b=Object(l.a)(f,2),y=b[0],v=b[1],h=Object(a.useState)(""),w=Object(l.a)(h,2),k=w[0],O=w[1],E=Object(a.useState)(0),j=Object(l.a)(E,2),A=j[0],x=j[1],S=Object(a.useState)(0),N=Object(l.a)(S,2),B=N[0],M=N[1],I=Object(a.useState)(0),F=Object(l.a)(I,2),T=F[0],C=F[1],q=Object(a.useState)(""),K=Object(l.a)(q,2),P=K[0],L=K[1];Object(a.useEffect)((function(){if(i&&0!==p.length){if(c.amount){var e=parseFloat(null===c||void 0===c?void 0:c.amount)*(1-u);v(e),O("\u6700\u5c11\u83b7\u53d6")}var t=p[0].liquidityA/p[0].liquidityB,a=n.mintAddress===p[0].mints[0]?n:c,r=a.mintAddress===n.mintAddress?c:n,o=parseFloat(a.amount)/parseFloat(r.amount);x(Math.abs(100-100*o/t));var s=(parseFloat(n.amount)*_.a).toFixed(6);M(parseFloat(s))}}),[n,c,u,o,i,p]),Object(a.useEffect)((function(){P===c.mintAddress?C(parseFloat(c.amount)/parseFloat(n.amount)):C(parseFloat(n.amount)/parseFloat(c.amount))}),[n,c,P]);return parseFloat(c.amount)?r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Oe,{className:"pool-card-cell"},"\u5151\u6362\u6bd4\u7387"),r.a.createElement("div",{className:"pool-card-cell ",title:T.toString()},r.a.createElement(m.a,{shape:"circle",size:"middle",type:"text",icon:r.a.createElement(R.a,null),onClick:function(){P!==c.mintAddress?L(c.mintAddress):L(n.mintAddress)}},"1\xa0",P===c.mintAddress?n.name:c.name,"\xa0=\xa0",T.toFixed(6),"\xa0",P===c.mintAddress?c.name:n.name))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Oe,{className:"pool-card-cell"},r.a.createElement(d.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"\u4f60\u7684\u4ea4\u6613\u5c06\u4f1a\u56de\u6eda\uff0c\u5982\u679c\u5728\u786e\u8ba4\u524d\u6709\u5f88\u5927\u7684\u4ef7\u683c\u53d8\u5316")},k," ",r.a.createElement(G.a,null))),r.a.createElement("div",{className:"pool-card-cell ",title:y.toString()},y.toFixed(6)," ",c.name)),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Oe,{className:"pool-card-cell"},r.a.createElement(d.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"\u6839\u636e\u4ea4\u6613\u91cf\u7684\u591a\u5c11\uff0c\u6210\u4ea4\u4ef7\u4e0e\u5e02\u4ef7\u7684\u5dee\u5f02")},"\u4ef7\u683c\u6ed1\u70b9 ",r.a.createElement(G.a,null))),r.a.createElement("div",{className:"pool-card-cell ",title:A.toString()},A<.01?"< 0.01%":A.toFixed(3)+"%")),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Oe,{className:"pool-card-cell"},r.a.createElement(d.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"\u6bcf\u7b14\u4ea4\u6613\u7684 ",100*_.a,"% \u4f5c\u4e3a\u534f\u8bae\u6fc0\u52b1\u53d1\u653e\u7ed9\u6d41\u52a8\u6027\u505a\u5e02\u5546")},"\u624b\u7eed\u8d39 ",r.a.createElement(G.a,null))),r.a.createElement("div",{className:"pool-card-cell ",title:B.toString()},B," ",n.name))):null},xe=n(280),Se=n(198),Ne=n.n(Se),Be=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return t?[t]:[]}),[t]),c=he(n),o=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=o.current;return function(){var t=e&&Ne.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(a.useEffect)((function(){if(o.current&&0!==c.length){var e=Ne.a.getInstanceByDom(o.current);e||(e=Ne.a.init(o.current));var t=[{name:c[0].names[0],value:c[0].liquidityAinUsd,tokens:c[0].liquidityA},{name:c[0].names[1],value:c[0].liquidityBinUsd,tokens:c[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=B.g.format(e.value),n=B.d.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=B.g.format(e.value),n=B.d.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"#999",lineHeight:22,align:"center"},r:{color:"#999",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[c]),0===c.length?null:r.a.createElement("div",{ref:o,style:{height:150,width:"100%"}})},Me=(n(466),O.a.Option),Ie=function(e){var t=Object(a.useState)((e.numerator/e.denominator*100).toString()),n=Object(l.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},r.a.createElement(N,{className:"slippage-input",size:"small",value:c,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(t){o(t);var n=parseFloat(t);if(Number.isFinite(n)){var a=1e4*n/100;e.set(a,1e4)}}}),"%")},Fe=function(e){var t=e.options,n=t.tradeFeeNumerator,a=t.tradeFeeDenominator,c=t.ownerTradeFeeNumerator,o=t.ownerTradeFeeDenominator,i=t.ownerWithdrawFeeNumerator,u=t.ownerWithdrawFeeDenominator;return r.a.createElement(p.a,{title:"Pool configuration"},r.a.createElement("div",{className:"pool-settings-grid"},r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"LPs Trading Fee:"),r.a.createElement(Ie,{numerator:n,denominator:a,set:function(t,n){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{tradeFeeNumerator:t,tradeFeeDenominator:n}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Owner Trading Fee:"),r.a.createElement(Ie,{numerator:c,denominator:o,set:function(t,n){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{ownerTradeFeeNumerator:t,ownerTradeFeeDenominator:n}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Withdraw Fee:"),r.a.createElement(Ie,{numerator:i,denominator:u,set:function(t,n){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{ownerWithdrawFeeNumerator:t,ownerWithdrawFeeDenominator:n}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Curve Type:"),r.a.createElement(O.a,{defaultValue:"0",style:{width:200},onChange:function(t){return e.setOptions(Object(I.a)(Object(I.a)({},e.options),{},{curveType:parseInt(t)}))}},r.a.createElement(Me,{value:"0"},"Constant Product"),r.a.createElement(Me,{value:"1"},"Flat")))))},Te=n(39),Ce=r.a.createElement(U.a,{style:{fontSize:24},spin:!0}),qe=function(){var e=Object(w.c)(),t=e.wallet,n=e.connected,c=Object(g.d)(),o=Object(a.useState)(!1),i=Object(l.a)(o,2),u=i[0],s=i[1],p=Z(),f=p.A,v=p.B,k=p.setLastTypedAccount,O=p.setPoolOperation,E=Object(_.h)([null===f||void 0===f?void 0:f.mintAddress,null===v||void 0===v?void 0:v.mintAddress]),j=Object(g.f)().slippage,A=Object(g.e)().tokenMap,x=Object(a.useState)({curveType:0,tradeFeeNumerator:25,tradeFeeDenominator:1e4,ownerTradeFeeNumerator:5,ownerTradeFeeDenominator:1e4,ownerWithdrawFeeNumerator:0,ownerWithdrawFeeDenominator:1e4}),S=Object(l.a)(x,2),N=S[0],B=S[1],M=n?Object(y.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.account&&v.account&&f.mint&&v.mint&&(s(!0),n=[{account:f.account,mintAddress:f.mintAddress,amount:f.convertAmount()},{account:v.account,mintAddress:v.mintAddress,amount:v.convertAmount()}],Object(_.c)(c,t,n,j,E,N).then((function(){s(!1)})).catch((function(e){console.log("Transaction failed",e),Object(V.a)({description:"\u8bf7\u91cd\u8bd5",message:"\u505a\u5e02\u88ab\u53d6\u6d88",type:"error"}),s(!1)})));case 1:case"end":return e.stop()}}),e)}))):t.connect,I=f.sufficientBalance()&&v.sufficientBalance(),F=Te.b?r.a.createElement(m.a,{className:"add-button",onClick:M,disabled:n&&(u||!f.account||!v.account||f.account===v.account),type:"primary",size:"large"},$("\u521b\u5efa\u6d41\u52a8\u6027\u6c60",n,A,f,v),u&&r.a.createElement(h.a,{indicator:Ce,className:"add-spinner"})):r.a.createElement(xe.a.Button,{className:"add-button",onClick:M,disabled:n&&(u||!f.account||!v.account||f.account===v.account),type:"primary",size:"large",overlay:r.a.createElement(Fe,{options:N,setOptions:B})},$("\u521b\u5efa\u6d41\u52a8\u6027\u6c60",n,A,f,v),u&&r.a.createElement(h.a,{indicator:Ce,className:"add-spinner"}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-card"},r.a.createElement(ue,{pool:E,aName:f.name,bName:v.name}),r.a.createElement(d.a,{trigger:"hover",content:r.a.createElement("div",{style:{width:300}},"\u6d41\u52a8\u6027\u63d0\u4f9b\u8005\u5728\u6bcf\u4e2a\u4ea4\u6613\u4e2d\u6309\u6d41\u52a8\u6c60\u5360\u6bd4\u8d5a\u53d6\u56fa\u5b9a\u6bd4\u4f8b\u7684\u8d39\u7528\u3002\u8d39\u7528\u4f1a\u5b9e\u65f6\u6dfb\u52a0\u5230\u6c60\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u63d0\u53d6\u6d41\u52a8\u6027\u8d44\u91d1\u6765\u83b7\u53d6\u3002")},r.a.createElement(m.a,{type:"text"},"\u6210\u4e3a\u6d41\u52a8\u6027\u505a\u5e02\u5546\u8d5a\u53d6\u6536\u76ca")),r.a.createElement(D,{title:"\u8f93\u5165",onInputChange:function(e){O(_.b.Add),f.amount!==e&&k(f.mintAddress),f.setAmount(e)},amount:f.amount,mint:f.mintAddress,onMintChange:function(e){f.setMint(e)}}),r.a.createElement("div",null,"+"),r.a.createElement(D,{title:"\u8f93\u5165",onInputChange:function(e){O(_.b.Add),v.amount!==e&&k(v.mintAddress),v.setAmount(e)},amount:v.amount,mint:v.mintAddress,onMintChange:function(e){v.setMint(e)}}),E&&r.a.createElement(Ke,{pool:E}),r.a.createElement(Be,{pool:E})),E&&r.a.createElement(m.a,{className:"add-button",type:"primary",size:"large",onClick:M,disabled:n&&(u||!f.account||!v.account||f.account===v.account||!I)},$("\u505a\u5e02",n,A,f,v),u&&r.a.createElement(h.a,{indicator:Ce,className:"add-spinner"})),!E&&F,r.a.createElement(Pe,{pool:E}))},Ke=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),c=he(n)[0],o=Object(M.j)().userAccounts,i=Object(M.h)(t.pubkeys.mint),u=o.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===i||void 0===i?void 0:i.supply.toNumber())||0);return c?r.a.createElement(p.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"\u4ef7\u683c\u4e0e\u505a\u5e02\u5360\u6bd4"},r.a.createElement(ee.a,{style:{width:"100%"}},r.a.createElement(te.a,{span:8},B.f.format(parseFloat(c.liquidityA)/parseFloat(c.liquidityB))),r.a.createElement(te.a,{span:8},B.f.format(parseFloat(c.liquidityB)/parseFloat(c.liquidityA))),r.a.createElement(te.a,{span:8},100*u<.001&&u>0?"<":"","\xa0",B.f.format(100*u),"%")),r.a.createElement(ee.a,{style:{width:"100%"}},r.a.createElement(te.a,{span:8},c.names[0]," per ",c.names[1]),r.a.createElement(te.a,{span:8},c.names[1]," per ",c.names[0]),r.a.createElement(te.a,{span:8},"\u505a\u5e02\u5360\u6bd4"))):null},Pe=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),c=he(n)[0],o=Object(M.j)().userAccounts,i=Object(M.h)(null===t||void 0===t?void 0:t.pubkeys.mint);if(!t||!c)return null;var u=t.pubkeys.holdingMints[0].toBase58(),s=t.pubkeys.holdingMints[1].toBase58(),l=o.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===i||void 0===i?void 0:i.supply.toNumber())||0);return r.a.createElement(p.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"\u60a8\u7684\u505a\u5e02"},r.a.createElement("div",{className:"pool-card",style:{width:"initial"}},r.a.createElement("div",{className:"pool-card-row"},r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(L,{mintA:u,mintB:s}),r.a.createElement("h3",{style:{margin:0}},null===c||void 0===c?void 0:c.name))),r.a.createElement("div",{className:"pool-card-cell"},r.a.createElement("h3",{style:{margin:0}},B.f.format(l*c.supply)))),r.a.createElement("div",{className:"pool-card-row",style:{margin:0}},r.a.createElement("div",{className:"pool-card-cell"},"\u505a\u5e02\u5360\u6bd4:"),r.a.createElement("div",{className:"pool-card-cell"},100*l<.001&&l>0?"<":"",B.f.format(100*l),"%")),r.a.createElement("div",{className:"pool-card-row",style:{margin:0}},r.a.createElement("div",{className:"pool-card-cell"},c.names[0],":"),r.a.createElement("div",{className:"pool-card-cell"},B.f.format(l*c.liquidityA))),r.a.createElement("div",{className:"pool-card-row",style:{margin:0}},r.a.createElement("div",{className:"pool-card-cell"},c.names[1],":"),r.a.createElement("div",{className:"pool-card-cell"},B.f.format(l*c.liquidityB)))))},Le=function(){var e=Object(g.f)(),t=e.slippage,n=e.setSlippage,c=100*t,o=Object(a.useState)(c.toString()),i=Object(l.a)(o,2),u=i[0],s=i[1];Object(a.useEffect)((function(){s(c.toString())}),[t,c]);var d={margin:5};return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},[.1,.5,1].map((function(e){return r.a.createElement(m.a,{key:e.toString(),style:d,type:(t=e,t===c?"primary":"default"),onClick:function(){return n(e/100)}},e,"%");var t})),r.a.createElement("div",{style:{padding:"3px 10px 3px 3px",border:"1px solid #434343"}},r.a.createElement(N,{className:"slippage-input",size:"small",placeholder:u,value:u,style:{width:50,fontSize:14,boxShadow:"none",borderColor:"transparent",outline:"transpaernt"},onChange:function(e){s(e);var t=parseFloat(e)/100;Number.isFinite(t)&&n(t)}}),"%"))},We=function(){var e=Object(w.c)(),t=e.providerUrl,n=e.setProvider,a=Object(g.e)(),c=a.endpoint,o=a.setEndpoint;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"\u4ea4\u6613\u8bbe\u7f6e:",r.a.createElement("div",null,"\u6ed1\u70b9:",r.a.createElement(Le,null))),r.a.createElement("div",{style:{display:"grid"}},"\u7f51\u7edc:"," ",r.a.createElement(O.a,{onSelect:o,value:c,style:{marginRight:8}},g.b.map((function(e){var t=e.name,n=e.endpoint;return r.a.createElement(O.a.Option,{value:n,key:n},t)})))),r.a.createElement("div",{style:{display:"grid"}},"\u94b1\u5305:"," ",r.a.createElement(O.a,{onSelect:n,value:t},w.a.map((function(e){var t=e.name,n=e.url;return r.a.createElement(O.a.Option,{value:n,key:n},t)})))))},ze=n(1063),De=n(171),Ue=function(e){var t=Object(w.c)().wallet,n=Object(M.i)().account;return t&&t.publicKey?r.a.createElement("div",{className:"wallet-wrapper"},r.a.createElement("span",null,(((null===n||void 0===n?void 0:n.lamports)||0)/me.c).toFixed(6)," SOL"),r.a.createElement("div",{className:"wallet-key"},Object(B.l)("".concat(t.publicKey)),r.a.createElement(K,{address:t.publicKey.toBase58(),style:{marginLeft:"0.5rem"}}))):null},Re=function(e){var t=Object(w.c)(),n=t.connected,a=t.wallet,c=Object(s.f)(),o=Object(s.e)();return r.a.createElement("div",{className:"App-Bar"},r.a.createElement("div",{className:"App-Bar-left"},r.a.createElement("div",{className:"App-logo"}),r.a.createElement(De.a,{mode:"horizontal",selectedKeys:[c.pathname]},r.a.createElement(De.a.Item,{key:"/"},r.a.createElement(u.b,{to:{pathname:"/"}},"SRMSwap")),r.a.createElement(De.a.Item,{key:"/info"},r.a.createElement(u.b,{to:{pathname:"/info"}},"\u56fe\u8868")),r.a.createElement(De.a.Item,{key:"trade"},r.a.createElement("a",{href:"https://dex.projectserum.com",target:"_blank",rel:"noopener noreferrer"},"\u4ea4\u6613",r.a.createElement("sup",null,"\u2197"))),r.a.createElement(De.a.Item,{key:"help"},r.a.createElement("a",{href:"https://serum-academy.com/en/serum-swap/",target:"_blank",rel:"noopener noreferrer"},"\u5e2e\u52a9",r.a.createElement("sup",null,"\u2197")))),e.left),r.a.createElement("div",{className:"App-Bar-right"},r.a.createElement(Ue,null),n&&r.a.createElement(m.a,{type:"text",size:"large",onClick:function(){return o.push({pathname:"/pool"})}},"\u6211\u7684\u505a\u5e02"),r.a.createElement("div",null,!n&&r.a.createElement(m.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},"\u8fde\u63a5\u94b1\u5305"),n&&r.a.createElement(d.a,{placement:"bottomRight",title:"Wallet public key",trigger:"click"})),e.right))},Ge=function(e){var t,n={width:120},c=[{key:"trade",tab:r.a.createElement("div",{style:n},"\u5151\u6362"),render:function(){return r.a.createElement(je,null)}},{key:"pool",tab:r.a.createElement("div",{style:n},"\u505a\u5e02"),render:function(){return r.a.createElement(qe,null)}}],o=Object(a.useState)(c[0].key),i=Object(l.a)(o,2),u=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,{right:r.a.createElement(d.a,{placement:"topRight",content:r.a.createElement(We,null),trigger:"click"},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(ze.a,null)}))}),r.a.createElement(p.a,{className:"exchange-card",headStyle:{padding:0},bodyStyle:{position:"relative"},tabList:c,tabProps:{tabBarGutter:0},activeTabKey:u,onTabChange:function(e){s(e)}},null===(t=c.find((function(e){return e.key===u})))||void 0===t?void 0:t.render()))},_e=n(127),Ve=n(1055),He=n(1060),Je=n(1066),Ye=(n(977),function(e){var t=e.instance,n=t.account,c=t.pool,o=Object(a.useState)(!1),i=Object(l.a)(o,2),u=i[0],s=i[1],d=Object(w.c)().wallet,p=Object(g.d)(),f=function(){var e=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),t=n.info.amount.toNumber(),e.next=5,Object(_.e)(p,d,t,n,c);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(V.a)({description:"Please try again and approve transactions from your wallet",message:"Removing liquidity cancelled.",type:"error"});case 10:return e.prev=10,s(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{type:"default",onClick:f,disabled:u},"\u53d6\u56de"))}),Ze=(n(467),v.a.Text),Qe=function(e){var t=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),n=he(t)[0],c=Object(M.j)().userAccounts,o=e.pool,i=o.pubkeys.holdingMints[0].toBase58(),u=o.pubkeys.holdingMints[1].toBase58(),s=Object(M.h)(o.pubkeys.mint),l=c.filter((function(e){return o.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===s||void 0===s?void 0:s.supply.toNumber())||0),d=c.filter((function(e){return o.pubkeys.mint.equals(e.info.mint)})).sort((function(e,t){return e.info.amount.toNumber()-t.info.amount.toNumber()})),m=d.length>0?d[0]:null;if(!n)return null;var f={fontSize:11},b=c.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u60a8\u7684\u505a\u5e02:"),r.a.createElement("div",{className:"pool-card-cell "},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,B.g.format(l*n.liquidity)),r.a.createElement("div",null,r.a.createElement(Ze,{type:"secondary",style:f},B.d.format(l*n.liquidityA)," ",n.names[0])),r.a.createElement("div",null,r.a.createElement(Ze,{type:"secondary",style:f},B.d.format(l*n.liquidityB)," ",n.names[1]))))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u60a8\u7684\u4f9b\u5e94\u91cf:"),r.a.createElement("div",{className:"pool-card-cell "},l*n.supply)),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u60a8\u7684\u6536\u76ca (24h):"),r.a.createElement("div",{className:"pool-card-cell ",title:"".concat(n.fees24h*l)},n.fees24h*l<.005?"< ":"",B.g.format(n.fees24h*l))),r.a.createElement("hr",null));return r.a.createElement(p.a,{className:"pool-card",title:r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{mintA:i,mintB:u,className:"left-icon"}),null===n||void 0===n?void 0:n.name)},b,r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u8d44\u91d1\u6c60:"),r.a.createElement("div",{className:"pool-card-cell "},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,B.g.format(n.liquidity)),r.a.createElement("div",null,r.a.createElement(Ze,{type:"secondary",style:f},B.d.format(n.liquidityA)," ",n.names[0])),r.a.createElement("div",null,r.a.createElement(Ze,{type:"secondary",style:f},B.d.format(n.liquidityB)," ",n.names[1]))))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"LP\u4f9b\u5e94\u91cf:"),r.a.createElement("div",{className:"pool-card-cell ",title:n.supply},B.d.format(n.supply))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u6bcf\u4ee3\u5e01\u4ef7\u503c:"),r.a.createElement("div",{className:"pool-card-cell "},B.g.format(n.liquidity/n.supply))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u4ea4\u6613\u91cf (24h):"),r.a.createElement("div",{className:"pool-card-cell "},B.g.format(n.volume24h))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u6536\u76ca (24h):"),r.a.createElement("div",{className:"pool-card-cell "},B.g.format(n.fees24h))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u9884\u4f30APY (24h):"),r.a.createElement("div",{className:"pool-card-cell "},B.e.format(n.apy24h))),r.a.createElement("div",{className:"pool-card-row"},r.a.createElement(Ze,{type:"secondary",className:"pool-card-cell "},"\u5730\u5740:"),r.a.createElement("div",{className:"pool-card-cell "},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,r.a.createElement(re.a,{address:n.address,type:"account",length:4})),r.a.createElement("div",{className:"small"},r.a.createElement(re.a,{address:o.pubkeys.holdingAccounts[0],type:"account",style:f,length:4}),r.a.createElement(Ze,{type:"secondary",style:f}," ",n.names[0])),r.a.createElement("div",{className:"small"},r.a.createElement(re.a,{address:o.pubkeys.holdingAccounts[1],type:"account",style:f,length:4}),r.a.createElement(Ze,{type:"secondary",style:f}," ",n.names[1]))))),r.a.createElement(Be,{pool:o}),r.a.createElement("div",{className:"pool-card-row"},m&&r.a.createElement(Ye,{instance:{pool:o,account:m}})))},Xe=v.a.Text,$e=S.a.Search,et=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(e.val),u=Object(l.a)(i,1)[0];return Object(a.useEffect)((function(){e.val!==u&&(o(e.val>u?"flash-positive":"flash-negative"),setTimeout((function(){return o("")}),200))}),[e.text,e.val,u]),r.a.createElement("span",{className:c},e.text)},tt=r.a.memo((function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)((function(){return{liquidity:0,volume:0,fees:0}})),i=Object(l.a)(o,2),u=i[0],s=i[1],p=Object(a.useRef)(null),f=Object(a.useRef)(null),b=Object(_.i)().pools,y=he(b),v=Object(B.m)("infoDisplayType","Table"),h=Object(l.a)(v,2),g=h[0],w=h[1];Object(a.useEffect)((function(){return p.current&&(f.current=Ne.a.init(p.current)),function(){f.current.dispose()}}),[]);var k=Object(a.useMemo)((function(){try{return new RegExp(n,"i")}catch(e){}}),[n]),O=Object(a.useCallback)((function(){f.current&&f.current.setOption({series:[{name:"Liquidity",type:"treemap",top:0,bottom:10,left:30,right:30,animation:!1,label:{show:!0,formatter:"{b}"},itemStyle:{normal:{borderColor:"#000"}},breadcrumb:{show:!1},data:y.filter((function(e){return!n||!k||k.test(e.name)})).map((function(e){return{value:e.liquidity,name:e.name,path:"Liquidity/".concat(e.name),data:e}}))}]})}),[y,n,k]);Object(a.useEffect)((function(){s(y.reduce((function(e,t){return e.liquidity=e.liquidity+t.liquidity,e.volume=e.volume+t.volume24h,e.fees=e.fees+t.fees,e}),{liquidity:0,volume:0,fees:0})),O()}),[y,O,n]);var E=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,t){return{props:{style:{}},children:r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(L,{mintA:t.mints[0],mintB:t.mints[1]}),r.a.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},e))}}},{title:"\u505a\u5e02",dataIndex:"liquidity",key:"liquidity",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement("div",null,r.a.createElement("div",null,B.g.format(t.liquidity)),r.a.createElement("div",null,r.a.createElement(Xe,{type:"secondary",style:{fontSize:11}},B.d.format(t.liquidityA)," ",t.names[0])),r.a.createElement("div",null,r.a.createElement(Xe,{type:"secondary",style:{fontSize:11}},B.d.format(t.liquidityB)," ",t.names[1])))}},sorter:function(e,t){return e.liquidity-t.liquidity},defaultSortOrder:"descend"},{title:"\u4f9b\u5e94\u91cf",dataIndex:"supply",key:"supply",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement(et,{text:e,val:t.supply})}},sorter:function(e,t){return e.supply-t.supply}},{title:"\u4ea4\u6613\u91cf (24h)",dataIndex:"volume",key:"volume",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement(et,{text:B.g.format(t.volume24h),val:t.volume24h})}},sorter:function(e,t){return e.volume24h-t.volume24h}},{title:"\u6536\u76ca (24h)",dataIndex:"fees24h",key:"fees24h",render:function(e,t){return{props:{style:{textAlign:"right"}},children:r.a.createElement(et,{text:B.g.format(t.fees24h),val:t.fees24h})}},sorter:function(e,t){return e.fees24h-t.fees24h}},{title:"APY",dataIndex:"apy",key:"apy",render:function(e,t){return{props:{style:{textAlign:"right"}},children:B.e.format(t.apy)}},sorter:function(e,t){return e.apy-t.apy}},{title:"\u5730\u5740",dataIndex:"address",key:"address",render:function(e,t){return{props:{style:{fontFamily:"monospace"}},children:r.a.createElement(oe,{pool:t.raw})}}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,{right:r.a.createElement(d.a,{placement:"topRight",title:"Settings",content:r.a.createElement(We,null),trigger:"click"},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(ze.a,null)}))}),r.a.createElement("div",{className:"info-header"},r.a.createElement("h1",null,"\u603b\u505a\u5e02: ",B.g.format(u.liquidity)),r.a.createElement("h1",null,"\u603b\u4ea4\u6613 (24h): ",B.g.format(u.volume)),r.a.createElement($e,{className:"search-input",placeholder:"Filter",type:"search",value:n,onChange:function(e){return c(e.target.value)},onSearch:function(e){return c(e)},style:{width:200}}),r.a.createElement(_e.a,{title:"Show as table"},r.a.createElement(m.a,{size:"small",type:"Table"===g?"primary":"text",onClick:function(){return w("Table")},icon:r.a.createElement(He.a,null)})),r.a.createElement(_e.a,{title:"Show as cards"},r.a.createElement(m.a,{size:"small",type:"Card"===g?"primary":"text",onClick:function(){return w("Card")},icon:r.a.createElement(Je.a,null)}))),r.a.createElement("div",{ref:p,style:{height:"250px",width:"100%"}}),"Table"===g?r.a.createElement(Ve.a,{dataSource:y.filter((function(e){return!n||!k||k.test(e.name)})),columns:E,size:"small",pagination:{pageSize:10}}):r.a.createElement("div",{className:"pool-grid"},y.sort((function(e,t){return t.liquidity-e.liquidity})).map((function(e){return r.a.createElement(Qe,{pool:e.raw})}))))})),nt=function(){var e=Object(_.g)(),t=Object(w.c)().connected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,{right:r.a.createElement(d.a,{placement:"topRight",title:"\u8bbe\u7f6e",content:r.a.createElement(We,null),trigger:"click"},r.a.createElement(m.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(ze.a,null)}))}),r.a.createElement("div",{className:"pool-grid"},e.map((function(e){return r.a.createElement(Qe,{pool:e.pool})})),!t&&r.a.createElement("h3",null,"\u8bf7\u8fde\u63a5\u94b1\u5305\u67e5\u770b\u60a8\u7684\u505a\u5e02")))};function at(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{basename:"/"},r.a.createElement(g.a,null,r.a.createElement(w.b,null,r.a.createElement(M.a,null,r.a.createElement(ve,null,r.a.createElement(Y,null,r.a.createElement(s.a,{exact:!0,path:"/",component:Ge}),r.a.createElement(s.a,{exact:!0,path:"/info",component:function(){return r.a.createElement(tt,null)}}),r.a.createElement(s.a,{exact:!0,path:"/pool",component:function(){return r.a.createElement(nt,null)}}))))))))}var rt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Banner"},r.a.createElement("div",{className:"Banner-description"},"SRMSwap\u6682\u672a\u5b8c\u6210\u4ee3\u7801\u5ba1\u8ba1\uff0c\u8bf7\u81ea\u884c\u627f\u62c5\u6f5c\u5728\u98ce\u9669\u3002")),r.a.createElement(at,null),r.a.createElement("div",{className:"social-buttons"},r.a.createElement(i.a,{href:"https://github.com/project-serum/oyster-swap","data-color-scheme":"no-preference: light; light: light; dark: light;","data-icon":"octicon-star","data-size":"large","data-show-count":!0,"aria-label":"Star solana-labs/oyster-swap on GitHub"},"Star"),r.a.createElement(i.a,{href:"https://github.com/project-serum/oyster-swap/fork","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","aria-label":"Fork project-serum/oyster-swap on GitHub"},"Fork")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(rt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),c=n(1054),o=n(19),i=function(e){var t,n,a=e.type,i=e.code,u="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!u)return null;var s=null!==(n=e.length)&&void 0!==n?n:9;return r.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(u),target:"_blank",title:u,style:e.style},i?r.a.createElement(c.a.Text,{style:e.style,code:!0},Object(o.l)(u,s)):Object(o.l)(u,s))}},19:function(e,t,n){"use strict";n.d(t,"m",(function(){return c})),n.d(t,"l",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return v}));var a=n(25),r=n(0);function c(e,t){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),c=Object(a.a)(n,2),o=c[0],i=c[1],u=Object(r.useCallback)((function(t){o!==t&&(i(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,u]}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function i(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,c=null===(n=e.get(t))||void 0===n?void 0:n.tokenSymbol;return c||(a?"".concat(t.substring(0,r),"..."):t)}function u(e,t){var n;return null===(n=e.get(t))||void 0===n?void 0:n.icon}function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a.map((function(t){return i(e,t,n)})).join("/")}function l(e,t){return!!e.get(t)}var d=new Set(["USDC","wUSDC","USDT"]);function m(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function p(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),c=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return r/c*a}var f=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),b=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),y=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),v=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8})},22:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return q})),n.d(t,"a",(function(){return z})),n.d(t,"i",(function(){return D})),n.d(t,"e",(function(){return U})),n.d(t,"h",(function(){return G})),n.d(t,"j",(function(){return _})),n.d(t,"g",(function(){return V})),n.d(t,"f",(function(){return H}));var a=n(512),r=n(31),c=n(25),o=n(492),i=n(56),u=n(12),s=n.n(u),l=n(17),d=n(0),m=n.n(d),p=n(34),f=n(72),b=n(20),y=n(39),v=n(43),h=n(54),g=n(59),w=n(19),k=n(275),O=m.a.createContext(null),E=new k.a,j=new Map,A=new Map,x=new Map,S=new Map,N=new Map,B=new Map,M=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if(null!==(a=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:return e.abrupt("return",K(n,a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var t=Object(l.a)(s.a.mark((function t(n,a){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(a);case 2:if(null!==(r=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return c=e.from(r.data),t.abrupt("return",Y(c));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),F=function(t,n){var a=e.from(n.data),r=Y(a);return{pubkey:t,account:Object(i.a)({},n),info:r}},T=new Map,C={query:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,c=r.toBase58(),!(o=B.get(c))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(i=N.get(c))){e.next=8;break}return e.abrupt("return",i);case 8:return i=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return C.add(r,e,a)})),N.set(c,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){var a=e.toBase58(),r=n||T.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");C.registerParser(e,r),N.delete(a);var c=r(e,t);return B.set(a,c),c},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,B.get(t)},registerParser:function(e,t){T.set(e.toBase58(),t)},queryAccount:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(c=S.get(r))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(o=x.get(r))){e.next=8;break}return e.abrupt("return",o);case 8:return o=M(t,a).then((function(e){return x.delete(r),S.set(r,e),e})),x.set(r,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addAccount:function(e,t){var n=K(e,t);return S.set(n.pubkey.toBase58(),n),n},getAccount:function(e){var t;return t="string"!==typeof e?e.toBase58():e,S.get(t)},queryMint:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(c=A.get(r))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(o=j.get(r))){e.next=8;break}return e.abrupt("return",o);case 8:return o=I(t,a).then((function(e){return x.delete(r),A.set(r,e),e})),x.set(r,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,A.get(t)},addMint:function(e,t){var n=Y(t.data);return A.set(e.toBase58(),n),n}},q=function(e){var t,n=Object(o.a)(S.values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e(a))return a}}catch(r){n.e(r)}finally{n.f()}};function K(t,n){var a=e.from(n.data),r=J(a);return{pubkey:t,account:Object(i.a)({},n),info:r}}function P(e,t){if(t)return{pubkey:e,account:t,info:{mint:y.c,owner:e,amount:new v.d(t.lamports),delegate:null,delegatedAmount:new v.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}var L=new Set,W=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return L.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(y.d)().token});case 5:e.sent.value.map((function(e){var t=J(e.account.data);return{pubkey:e.pubkey,account:Object(i.a)({},e.account),info:t}})).forEach((function(e){S.set(e.pubkey.toBase58(),e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function z(t){var n=t.children,a=void 0===n?null:n,o=Object(p.d)(),u=Object(f.c)(),s=u.wallet,l=u.connected,g=Object(d.useState)([]),w=Object(c.a)(g,2),k=w[0],j=w[1],x=Object(d.useState)([]),N=Object(c.a)(x,2),M=N[0],I=N[1],F=function(){var e=Object(p.d)(),t=Object(f.c)().wallet,n=Object(d.useState)(),a=Object(c.a)(n,2),r=a[0],o=a[1];return Object(d.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&o(e)})),e.onAccountChange(t.publicKey,(function(e){e&&o(e)})))}),[o,t,t.publicKey,e]),{nativeAccount:r}}().nativeAccount,T=Object(h.i)().pools,q=Object(d.useCallback)((function(){return Object(r.a)(S.values()).filter((function(e){return e.info.owner.toBase58()===s.publicKey.toBase58()}))}),[s]);Object(d.useEffect)((function(){I([P(s.publicKey,F)].concat(Object(r.a)(k)).filter((function(e){return void 0!==e})))}),[F,s,k]);var K=null===s||void 0===s?void 0:s.publicKey;return Object(d.useEffect)((function(){if(o&&K){W(o,y.a),W(o,K).then((function(){j(q())}));var t=o.onProgramAccountChange(Object(y.d)().token,(function(t){var n=t.accountId;if(t.accountInfo.data.length===v.a.span){var a=J(t.accountInfo.data),r={pubkey:new b.d(t.accountId),account:Object(i.a)({},t.accountInfo),info:a};(L.has(r.info.owner.toBase58())||S.has(n))&&(S.set(n,r),j(q()),E.raiseAccountUpdated(n))}else if(t.accountInfo.data.length===v.b.span){if(A.has(n)){var c=e.from(t.accountInfo.data),o=Y(c);A.set(n,o),E.raiseAccountUpdated(n)}E.raiseAccountUpdated(n)}B.has(n)&&C.add(new b.d(n),t.accountInfo)}),"singleGossip");return function(){o.removeProgramAccountChangeListener(t)}}j([])}),[o,l,K,q]),m.a.createElement(O.Provider,{value:{userAccounts:M,pools:T,nativeAccount:F}},a)}function D(){return{account:Object(d.useContext)(O).nativeAccount}}var U=function(){var t=Object(l.a)(s.a.mark((function t(n,r,c){var o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(w.b)(r,99).map((function(e){return R(n,e,c)})));case 2:return o=t.sent,u=o.map((function(t){return t.array.map((function(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(i.a)(Object(i.a)({},r),{},{data:e.from(n[0],"base64")})}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(c=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+c.error.message);case 6:if(!c.result.value){e.next=9;break}return o=c.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function G(e){var t=Object(p.d)(),n=Object(d.useState)(),a=Object(c.a)(n,2),r=a[0],o=a[1],i="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(d.useEffect)((function(){if(i){C.queryMint(t,i).then(o).catch((function(e){return Object(g.a)({message:e.message,type:"error"})}));var e=E.onAccount((function(e){e.id===i&&C.queryMint(t,i).then(o)}));return function(){e()}}}),[t,i]),r}function _(){return{userAccounts:Object(d.useContext)(O).userAccounts}}function V(){return{pools:Object(d.useContext)(O).pools}}var H=function(e){var t=_().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]},J=function(e){var t=v.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=v.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new v.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=v.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=v.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},Y=function(e){if(e.length!==v.b.span)throw new Error("Not a valid Mint");var t=v.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=v.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(65).Buffer)},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(82),r=n(77),c=n(140),o=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};o.type="AccountUpdate";var i=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};i.type="MarketUpdate";var u=function(){function e(){Object(r.a)(this,e),this.emitter=new c.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"onAccount",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseAccountUpdated",value:function(e){this.emitter.emit(o.type,new o(e))}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(i.type,new i(e))}}]),e}()},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return E}));var a=n(31),r=n(12),c=n.n(r),o=n(17),i=n(25),u=n(19),s=n(20),l=n(0),d=n.n(l),m=n(39),p=n(59),f=n(149),b=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"testnet",endpoint:Object(s.h)("testnet")},{name:"devnet",endpoint:Object(s.h)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],y=b[0].endpoint,v=d.a.createContext({endpoint:y,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new s.b(y,"recent"),sendConnection:new s.b(y,"recent"),env:b[0].name,tokens:[],tokenMap:new Map});function h(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(u.m)("connectionEndpts",b[0].endpoint),c=Object(i.a)(r,2),o=c[0],p=c[1],f=Object(u.m)("slippage",.25.toString()),y=Object(i.a)(f,2),h=y[0],g=y[1],w=Object(l.useMemo)((function(){return new s.b(o,"recent")}),[o]),k=Object(l.useMemo)((function(){return new s.b(o,"recent")}),[o]),O=(null===(t=b.find((function(e){return e.endpoint===o})))||void 0===t?void 0:t.name)||b[0].name,E=Object(l.useState)([]),j=Object(i.a)(E,2),A=j[0],x=j[1],S=Object(l.useState)(new Map),N=Object(i.a)(S,2),B=N[0],M=N[1];return Object(l.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(O,".json")).then((function(e){return e.json()})).then((function(e){var t=e.reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);M(t),x(e)}))}),[O]),Object(m.e)(O),Object(l.useEffect)((function(){var e=w.onAccountChange((new s.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=k.onAccountChange((new s.a).publicKey,(function(){}));return function(){k.removeAccountChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=k.onSlotChange((function(){return null}));return function(){k.removeSlotChangeListener(e)}}),[k]),d.a.createElement(v.Provider,{value:{endpoint:o,setEndpoint:p,slippage:parseFloat(h),setSlippage:function(e){return g(e.toString())},connection:w,sendConnection:k,tokens:A,tokenMap:B,env:O}},a)}function g(){return Object(l.useContext)(v).connection}function w(){var e=Object(l.useContext)(v);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}function k(){var e=Object(l.useContext)(v);return{slippage:e.slippage,setSlippage:e.setSlippage}}var O=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,r=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&r.push(t[1])})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r,o){var i,u,l,m,b,y,v,h,g,w=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!(w.length>4&&void 0!==w[4])||w[4],l=new s.f,r.forEach((function(e){return l.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return l.recentBlockhash=e.sent.blockhash,(i=l).setSigners.apply(i,[n.publicKey].concat(Object(a.a)(o.map((function(e){return e.publicKey}))))),o.length>0&&(m=l).partialSign.apply(m,Object(a.a)(o)),e.next=10,n.signTransaction(l);case 10:return l=e.sent,b=l.serialize(),y={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(b,y);case 15:if(v=e.sent,!u){e.next=26;break}return e.next=19,t.confirmTransaction(v,y&&y.commitment);case 19:if(!(null===(h=e.sent.value)||void 0===h?void 0:h.err)){e.next=26;break}return e.next=23,O(t,v);case 23:throw g=e.sent,Object(p.a)({message:"\u4ea4\u6613\u5931\u8d25...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(f.a,{address:v,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(v," failed (").concat(JSON.stringify(h),")"));case 26:return e.abrupt("return",v);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},372:function(e,t){},373:function(e,t){},374:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return p}));var a=n(111),r=n(20),c=n(1),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return c.blob(32,e)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64";return c.blob(8,e)},u=c.struct([c.u8("isInitialized"),c.u8("nonce"),o("tokenAccountA"),o("tokenAccountB"),o("tokenPool"),i("feesNumerator"),i("feesDenominator")]),s=c.struct([c.u8("isInitialized"),c.u8("nonce"),o("tokenProgramId"),o("tokenAccountA"),o("tokenAccountB"),o("tokenPool"),o("mintA"),o("mintB"),o("feeAccount"),c.u8("curveType"),i("tradeFeeNumerator"),i("tradeFeeDenominator"),i("ownerTradeFeeNumerator"),i("ownerTradeFeeDenominator"),i("ownerWithdrawFeeNumerator"),i("ownerWithdrawFeeDenominator"),c.blob(16,"padding")]),l=function(t,n,a,o,i,u,s,l,d,m,p,f,b,y,v,h,g){var w=[{pubkey:t.publicKey,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1}],k=c.struct([c.u8("instruction"),c.u8("nonce"),c.u8("curveType"),c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.blob(16,"padding")]),O=e.alloc(1024),E=k.encode({instruction:0,nonce:m,curveType:p,tradeFeeNumerator:f,tradeFeeDenominator:b,ownerTradeFeeNumerator:y,ownerTradeFeeDenominator:v,ownerWithdrawFeeNumerator:h,ownerWithdrawFeeDenominator:g},O);return O=O.slice(0,E),new r.g({keys:w,programId:d,data:O})},d=function(t,n,o,u,s,l,d,m,p,f,b,y,v){var h=c.struct([c.u8("instruction"),i("poolTokenAmount"),i("maximumTokenA"),i("maximumTokenB")]),g=e.alloc(h.span);h.encode({instruction:2,poolTokenAmount:new a.a(b).toBuffer(),maximumTokenA:new a.a(y).toBuffer(),maximumTokenB:new a.a(v).toBuffer()},g);var w=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}];return new r.g({keys:w,programId:p,data:g})},m=function(t,n,o,u,s,l,d,m,p,f,b,y,v,h){var g=c.struct([c.u8("instruction"),i("poolTokenAmount"),i("minimumTokenA"),i("minimumTokenB")]),w=e.alloc(g.span);g.encode({instruction:3,poolTokenAmount:new a.a(y).toBuffer(),minimumTokenA:new a.a(v).toBuffer(),minimumTokenB:new a.a(h).toBuffer()},w);var k=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0}];return u&&k.push({pubkey:u,isSigner:!1,isWritable:!0}),k.push({pubkey:b,isSigner:!1,isWritable:!1}),new r.g({keys:k,programId:f,data:w})},p=function(t,n,o,u,s,l,d,m,p,f,b,y,v){var h=c.struct([c.u8("instruction"),i("amountIn"),i("minimumAmountOut")]),g=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}];v&&g.push({pubkey:v,isSigner:!1,isWritable:!0});var w=e.alloc(h.span);return h.encode({instruction:1,amountIn:new a.a(b).toBuffer(),minimumAmountOut:new a.a(y).toBuffer()},w),new r.g({keys:g,programId:p,data:w})}}).call(this,n(65).Buffer)},39:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return m}));var a,r,c=n(20),o=new c.d("So11111111111111111111111111111111111111112"),i=new c.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),u=new c.d("HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN"),s=new c.d("".concat("7yLFBZsrs7VWUKp49CyZs9nXaDrES5rSPpDyL3fLFE39"));console.debug("Host address: ".concat(null===s||void 0===s?void 0:s.toBase58())),console.debug("Owner address: ".concat(null===u||void 0===u?void 0:u.toBase58()));var l=[{name:"mainnet-beta",swap:function(){return{current:new c.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),legacy:[]}}},{name:"testnet",swap:function(){return{current:new c.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),legacy:[new c.d("9tdctNJuFsYZ6VrKfKEuwwbPp4SFdFw3jYBZU8QUtzeX"),new c.d("CrRvVBS4Hmj47TPU3cMukurpmCUYUrdHYxTQBxncBGqw")]}}},{name:"devnet",swap:function(){return{current:new c.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ"),legacy:[new c.d("H1E1G7eD5Rrcy43xvDxXCsjkRggz7MWNMLGJ8YNzJ8PM"),new c.d("CMoteLxSPVPoc7Drcggf3QPg3ue8WPpxYyZTg77UGqHo"),new c.d("EEuPz4iZA5reBUeZj6x1VzoiHfYeHMppSCnHZasRFhYo")]}}},{name:"localnet",swap:function(){return{current:new c.d("5rdpyt5iGfr68qt28hkefcFyF4WtyhTwqKDmHSBG8GZx"),legacy:[]}}}],d=function(e){var t=l.find((function(t){return t.name===e}));if(t){var n=t.swap();a=n.current,r=n.legacy}},m=function(){return{token:i,swap:a,swap_legacy:r}}},466:function(e,t,n){},467:function(e,t,n){},515:function(e,t,n){e.exports=n(1053)},520:function(e,t,n){},521:function(e,t,n){},525:function(e,t){},526:function(e,t){},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return j})),n.d(t,"g",(function(){return A})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return I}));var a,r=n(31),c=n(25),o=n(12),i=n.n(o),u=n(17),s=n(20),l=n(34),d=n(0),m=n(43),p=n(59),f=n(22),b=n(39),y=n(88),v=.003,h=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a,r,c){var o,u,s,d,v,h,g,w,k,O,E,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return Object(p.a)({message:"\u53d6\u56de\u6d41\u52a8\u6027\u8d44\u4ea7...",description:"\u8bf7\u68c0\u67e5\u5e76\u6279\u51c6\u4ea4\u6613",type:"warn"}),o=0,u=0,e.next=7,f.c.queryMint(t,c.pubkeys.mint);case 7:return s=e.sent,e.next=10,f.c.queryAccount(t,c.pubkeys.holdingAccounts[0]);case 10:return d=e.sent,e.next=13,f.c.queryAccount(t,c.pubkeys.holdingAccounts[1]);case 13:if(v=e.sent,s.mintAuthority){e.next=16;break}throw new Error("Mint doesnt have authority");case 16:return h=s.mintAuthority,g=[],w=[],k=[],e.next=22,t.getMinimumBalanceForRentExemption(m.a.span);case 22:return O=e.sent,e.next=25,N(n.publicKey,n.publicKey,w,k,O,d.info.mint,g);case 25:return e.t0=e.sent,e.next=28,N(n.publicKey,n.publicKey,w,k,O,v.info.mint,g);case 28:return e.t1=e.sent,E=[e.t0,e.t1],w.push(m.c.createApproveInstruction(Object(b.d)().token,r.pubkey,h,n.publicKey,[],a)),w.push(Object(y.withdrawInstruction)(c.pubkeys.account,h,c.pubkeys.mint,c.pubkeys.feeAccount,r.pubkey,c.pubkeys.holdingAccounts[0],c.pubkeys.holdingAccounts[1],E[0],E[1],c.pubkeys.program,Object(b.d)().token,a,o,u)),e.next=34,Object(l.c)(t,n,w.concat(k),g);case 34:j=e.sent,Object(p.a)({message:"\u6d41\u52a8\u6027\u8d44\u4ea7\u5df2\u53d6\u56de\uff0c\u611f\u8c22\u60a8\u7684\u652f\u6301\uff01",type:"success",description:"Transaction - ".concat(j)});case 36:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a,r,c){var o,u,d,v,h,g,w,k,O,E,j,A,x,S,B;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&a[0].account){e.next=3;break}return Object(p.a)({type:"error",message:"Pool doesn't exsist.",description:"Swap trade cancelled"}),e.abrupt("return");case 3:return u=a[0].amount,d=a[1].amount*(1-r),v=(null===(o=c.pubkeys.holdingMints[0])||void 0===o?void 0:o.toBase58())===a[0].account.info.mint.toBase58()?c.pubkeys.holdingAccounts[0]:c.pubkeys.holdingAccounts[1],h=v===c.pubkeys.holdingAccounts[0]?c.pubkeys.holdingAccounts[1]:c.pubkeys.holdingAccounts[0],e.next=9,f.c.queryMint(t,c.pubkeys.mint);case 9:if((g=e.sent).mintAuthority&&c.pubkeys.feeAccount){e.next=12;break}throw new Error("Mint doesnt have authority");case 12:return w=g.mintAuthority,k=[],O=[],E=[],e.next=18,t.getMinimumBalanceForRentExemption(m.a.span);case 18:return j=e.sent,A=q(k,O,a[0].account,n.publicKey,u+j,E),x=N(n.publicKey,n.publicKey,k,O,j,new s.d(a[1].mintAddress),E),k.push(m.c.createApproveInstruction(Object(b.d)().token,A,w,n.publicKey,[],u)),S=b.a?N(n.publicKey,b.a,k,O,j,c.pubkeys.mint,E):void 0,k.push(Object(y.swapInstruction)(c.pubkeys.account,w,A,v,h,x,c.pubkeys.mint,c.pubkeys.feeAccount,c.pubkeys.program,Object(b.d)().token,u,d,S)),e.next=26,Object(l.c)(t,n,k.concat(O),E);case 26:B=e.sent,Object(p.a)({message:"\u5df2\u6210\u529f\u5151\u6362",type:"success",description:"Transaction - ".concat(B)});case 28:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a,r,c,o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=7;break}if(o){e.next=3;break}throw new Error("Options are required to create new pool.");case 3:return e.next=5,T(n,t,a,o);case 5:e.next=9;break;case 7:return e.next=9,x(c,a,t,n);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,o){return e.apply(this,arguments)}}(),k=function(e,t){return t.map((function(t){return f.c.queryAccount(e,new s.d(t))}))},O=function(e,t){var n=new s.d(e.data.tokenPool);return{pubkeys:{account:e.pubkey,program:t,mint:n,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB].map((function(e){return new s.d(e)}))},legacy:!1,raw:e}},E=function(){var e=Object(l.d)(),t=Object(d.useState)([]),n=Object(c.a)(t,2),a=n[0],o=n[1];return Object(d.useEffect)((function(){o([]);var t=function(){var t=Object(u.a)(i.a.mark((function t(n){var a,c,o,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>1&&void 0!==l[1]&&l[1],c=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===y.TokenSwapLayout.span||e.account.data.length===y.TokenSwapLayoutLegacyV0.span})).map((function(t){var r={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};if(t.account.data.length===y.TokenSwapLayoutLegacyV0.span){r.data=y.TokenSwapLayoutLegacyV0.decode(t.account.data);var o=O(r,n);o.legacy=a,c.push(o),r.init=Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(k(e,[r.data.tokenAccountA,r.data.tokenAccountB]));case 3:n=t.sent,o.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{r.data=y.TokenSwapLayout.decode(t.account.data);var l=O(r,n);l.legacy=a,l.pubkeys.feeAccount=new s.d(r.data.feeAccount),l.pubkeys.holdingMints=[new s.d(r.data.mintA),new s.d(r.data.mintB)],c.push(l)}return r})),o=c.map((function(e){var t;return[].concat(Object(r.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(r.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(f.e)(e,o,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=new s.d(t[n]);return e.data.length===m.a.span?f.c.addAccount(a,e):e.data.length===m.b.span?f.c.addMint(a,e):e}))}));case 8:return t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(b.d)().swap)].concat(Object(r.a)(Object(b.d)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){o(e.flat())}))}),[e]),Object(d.useEffect)((function(){var t=e.onProgramAccountChange(Object(b.d)().swap,function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,u,l,d,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===y.TokenSwapLayout.span&&(c=t.accountInfo,u={data:y.TokenSwapLayout.decode(c.data),account:c,pubkey:new s.d(n)},(l=a&&a.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&l>=0&&a?(d=a.filter((function(e,t){return t!==l})),o([].concat(Object(r.a)(d),[O(u,Object(b.d)().swap)]))):((m=O(u,Object(b.d)().swap)).pubkeys.feeAccount=new s.d(u.data.feeAccount),m.pubkeys.holdingMints=[new s.d(u.data.mintA),new s.d(u.data.mintB)],o([].concat(Object(r.a)(a),[m]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a]),{pools:a}},j=function(e){var t=Object(l.d)(),n=Object(f.g)().pools,a=Object(d.useState)(),o=Object(c.a)(a,2),s=o[0],m=o[1],p=Object(d.useMemo)((function(){return Object(r.a)(e).sort()}),Object(r.a)(e));return Object(d.useEffect)((function(){Object(u.a)(i.a.mark((function e(){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(void 0),a=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===p[t]}))})),r=0;case 3:if(!(r<a.length)){e.next=14;break}return c=a[r],e.next=7,f.c.queryAccount(t,c.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return m(c),e.abrupt("return");case 11:r++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,p,n]),s},A=function(){var e=Object(f.g)().pools,t=Object(f.j)().userAccounts;return Object(d.useMemo)((function(){var n=t.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(r.a)(e.get(n)||[]),[t])),e}),new Map);return e.filter((function(e){return n.has(e.pubkeys.mint.toBase58())})).map((function(e){var t,a,r=null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58();return null===(a=n.get(e.pubkeys.mint.toBase58()))||void 0===a?void 0:a.map((function(t){return{account:t,isFeeAccount:r===t.pubkey.toBase58(),pool:e}}))})).flat()}),[e,t])};function x(e,t,n,a){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(i.a.mark((function e(t,n,a,r){var c,o,u,s,d,v,h,g,w,k,O,E,j,A,x,S,B,M,I,F;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(p.a)({message:"\u589e\u52a0\u6d41\u52a8\u6027\u8d44\u4ea7...",description:"\u8bf7\u68c0\u67e5\u5e76\u6279\u51c6\u4ea4\u6613",type:"warn"}),e.next=3,f.c.queryMint(a,t.pubkeys.mint);case 3:if((c=e.sent).mintAuthority){e.next=6;break}throw new Error("Mint doesnt have authority");case 6:if(t.pubkeys.feeAccount){e.next=8;break}throw new Error("Invald fee account");case 8:return e.next=10,f.c.queryAccount(a,t.pubkeys.holdingAccounts[0]);case 10:return o=e.sent,e.next=13,f.c.queryAccount(a,t.pubkeys.holdingAccounts[1]);case 13:if(u=e.sent,s=o.info.amount.toNumber(),d=u.info.amount.toNumber(),v=o.info.mint.toBase58()===n[0].mintAddress?n[0]:n[1],h=v===n[0]?n[1]:n[0],v.account&&h.account){e.next=20;break}throw new Error("Missing account info.");case 20:return g=c.supply.toNumber(),w=c.mintAuthority,k=v.amount,O=h.amount,E=Math.min(.995*k*g/s,.995*O*g/d),j=[],A=[],x=[],e.next=30,a.getMinimumBalanceForRentExemption(m.a.span);case 30:return S=e.sent,B=q(j,A,v.account,r.publicKey,k+S,x),M=q(j,A,h.account,r.publicKey,O+S,x),I=N(r.publicKey,r.publicKey,j,[],S,t.pubkeys.mint,x,new Set([t.pubkeys.feeAccount.toBase58()])),j.push(m.c.createApproveInstruction(Object(b.d)().token,B,w,r.publicKey,[],k)),j.push(m.c.createApproveInstruction(Object(b.d)().token,M,w,r.publicKey,[],O)),j.push(Object(y.depositInstruction)(t.pubkeys.account,w,B,M,t.pubkeys.holdingAccounts[0],t.pubkeys.holdingAccounts[1],t.pubkeys.mint,I,t.pubkeys.program,Object(b.d)().token,E,k,O)),e.next=39,Object(l.c)(a,r,j.concat(A),x);case 39:F=e.sent,Object(p.a)({message:"\u505a\u5e02\u6210\u529f",type:"success",description:"Transaction - ".concat(F)});case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,a,r,c,o,i){var u,s=c.toBase58(),l=Object(f.d)((function(e){return e.info.mint.toBase58()===s&&e.info.owner.toBase58()===t.toBase58()&&(void 0===i||!i.has(e.pubkey.toBase58()))})),d=s===b.c.toBase58();if(l&&!d)u=l.pubkey;else{var p=K(n,e,r,c,t,m.a.span);u=p.publicKey,o.push(p),d&&a.push(m.c.createCloseAccountInstruction(Object(b.d)().token,u,e,e,[]))}return u}function B(e,t,n){return t*n/(e+n)}function M(e,t,n){return n>=t?"Not possible":e*n/(t-n)}function I(e,t,n,a,r){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(i.a.mark((function e(t,n,r,c,o){var u,s,l,d,m,p,b,y,v,h,g,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.c.queryMint(t,c.pubkeys.mint);case 2:return u=e.sent,e.next=5,f.c.queryAccount(t,c.pubkeys.holdingAccounts[0]);case 5:return s=e.sent,e.next=8,f.c.queryAccount(t,c.pubkeys.holdingAccounts[1]);case 8:if(l=e.sent,u.mintAuthority){e.next=11;break}throw new Error("Mint doesnt have authority");case 11:if(!u.supply.eqn(0)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,f.c.queryMint(t,s.info.mint);case 15:return d=e.sent,e.next=18,f.c.queryMint(t,l.info.mint);case 18:if(m=e.sent,d&&m){e.next=21;break}return e.abrupt("return");case 21:p=s.info.mint.toBase58()===n,b=Math.pow(10,p?m.decimals:d.decimals),y=Math.pow(10,p?d.decimals:m.decimals),v=r*y,h=(p?s:l).info.amount.toNumber(),g=(p?l:s).info.amount.toNumber(),e.t0=+o,e.next=e.t0===a.Add?30:e.t0===a.SwapGivenProceeds?32:e.t0===a.SwapGivenInput?34:36;break;case 30:return w=g/h*v,e.abrupt("break",36);case 32:return w=M(g,h,v),e.abrupt("break",36);case 34:return w=B(h,g,v),e.abrupt("break",36);case 36:if("string"!==typeof w){e.next=38;break}return e.abrupt("return",w);case 38:if(void 0!==w){e.next=40;break}return e.abrupt("return",void 0);case 40:return e.abrupt("return",w/b);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,n,a){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(t,n,a,o){var u,d,f,v,h,g,w,k,O,E,j,A,x,S;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.a)({message:"\u5efa\u7acb\u65b0\u7684\u8d44\u91d1\u6c60...",description:"\u8bf7\u68c0\u67e5\u5e76\u6279\u51c6\u4ea4\u6613",type:"warn"}),!a.some((function(e){return!e.account}))){e.next=4;break}return Object(p.a)({message:"You need to have balance for all legs in the basket...",description:"Please review inputs.",type:"error"}),e.abrupt("return");case 4:return u=[],d=[],f=new s.a,e.t0=u,e.t1=s.e,e.t2=t.publicKey,e.t3=f.publicKey,e.next=13,n.getMinimumBalanceForRentExemption(m.b.span);case 13:return e.t4=e.sent,e.t5=m.b.span,e.t6=Object(b.d)().token,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),v=new s.a,e.next=22,s.d.findProgramAddress([v.publicKey.toBuffer()],Object(b.d)().swap);case 22:return h=e.sent,g=Object(c.a)(h,2),w=g[0],k=g[1],u.push(m.c.createInitMintInstruction(Object(b.d)().token,f.publicKey,8,w,null)),e.next=29,n.getMinimumBalanceForRentExemption(m.a.span);case 29:return O=e.sent,E=[],j=[],a.forEach((function(e){if(e.account){var n=e.account.info.mint;E.push(K(u,t.publicKey,O,n,w,m.a.span))}})),A=K(u,t.publicKey,O,f.publicKey,t.publicKey,m.a.span),x=K(u,t.publicKey,O,f.publicKey,b.b||t.publicKey,m.a.span),e.next=37,Object(l.c)(n,t,u,[f,A,x].concat(E,Object(r.a)(j)));case 37:return S=e.sent,Object(p.a)({message:"Accounts created",description:"Transaction ".concat(S),type:"success"}),Object(p.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),j=[],u=[],d=[],e.t9=u,e.t10=s.e,e.t11=t.publicKey,e.t12=v.publicKey,e.next=49,n.getMinimumBalanceForRentExemption(y.TokenSwapLayout.span);case 49:return e.t13=e.sent,e.t14=y.TokenSwapLayout.span,e.t15=Object(b.d)().swap,e.t16={fromPubkey:e.t11,newAccountPubkey:e.t12,lamports:e.t13,space:e.t14,programId:e.t15},e.t17=e.t10.createAccount.call(e.t10,e.t16),e.t9.push.call(e.t9,e.t17),a.forEach((function(e,n){if(e.account){var a=q(u,d,e.account,t.publicKey,e.amount+O,j);u.push(m.c.createTransferInstruction(Object(b.d)().token,a,E[n].publicKey,t.publicKey,[],e.amount))}})),u.push(Object(y.createInitSwapInstruction)(v,w,E[0].publicKey,E[1].publicKey,f.publicKey,x.publicKey,A.publicKey,Object(b.d)().token,Object(b.d)().swap,k,o.curveType,o.tradeFeeNumerator,o.tradeFeeDenominator,o.ownerTradeFeeNumerator,o.ownerTradeFeeDenominator,o.ownerWithdrawFeeNumerator,o.ownerWithdrawFeeDenominator)),e.next=59,Object(l.c)(n,t,u.concat(d),[v].concat(Object(r.a)(j)));case 59:S=e.sent,Object(p.a)({message:"Pool Funded. \u505a\u5e02\u6210\u529f",type:"success",description:"Transaction - ".concat(S)});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n,a,r,c){if(!n.info.isNative)return n.pubkey;var o=new s.a;return e.push(s.e.createAccount({fromPubkey:a,newAccountPubkey:o.publicKey,lamports:r,space:m.a.span,programId:Object(b.d)().token})),e.push(m.c.createInitAccountInstruction(Object(b.d)().token,b.c,o.publicKey,a)),t.push(m.c.createCloseAccountInstruction(Object(b.d)().token,o.publicKey,a,a,[])),c.push(o),o.publicKey}function K(e,t,n,a,r,c){var o=new s.a;return e.push(s.e.createAccount({fromPubkey:t,newAccountPubkey:o.publicKey,lamports:n,space:c,programId:Object(b.d)().token})),e.push(m.c.createInitAccountInstruction(Object(b.d)().token,a,o.publicKey,r)),o}!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(a||(a={}))},552:function(e,t){},554:function(e,t){},566:function(e,t){},567:function(e,t){},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),c=n(343);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,i=e.txid,u=void 0===i?"":i,s=e.type,l=void 0===s?"info":s,d=e.placement,m=void 0===d?"bottomLeft":d;u&&(o=r.a.createElement(r.a.Fragment,null)),c.a[l]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:m,style:{backgroundColor:"white"}})}},637:function(e,t,n){},649:function(e,t,n){},659:function(e,t,n){},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return A}));var a=n(25),r=n(0),c=n.n(r),o=n(489),i=n(59),u=n(34),s=n(19),l=n(12),d=n.n(l),m=n(17),p=n(77),f=n(82),b=n(184),y=n(103),v=n(102),h=n(140),g=n.n(h),w=n(20),k=function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(e,a){var r;return Object(p.a)(this,n),(r=t.call(this))._publicKey=void 0,r._onProcess=void 0,r._publicKey=null,r._onProcess=!1,r.connect=r.connect.bind(Object(b.a)(r)),r}return Object(f.a)(n,[{key:"signTransaction",value:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,console.log("solong helper select account"),window.solong.selectAccount().then((function(t){e._publicKey=new w.d(t),console.log("window solong select:",t,"this:",e),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(i.a)({message:"Solong wallet \u62a5\u9519",description:"\u8bf7\u5148\u5728Chrome\u5b89\u88c5solong wallet\u63d2\u4ef6\uff0c\u6216\u5728\u8bbe\u7f6e\u4e2d\u9009\u62e9\u5176\u4ed6\u94b1\u5305\u3002"}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(g.a),O=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],E=c.a.createContext(null);function j(e){var t,n,l=e.children,d=void 0===l?null:l,m=Object(u.e)().endpoint,p=Object(s.m)("walletProvider","https://www.sollet.io"),f=Object(a.a)(p,2),b=f[0],y=f[1],v=Object(r.useMemo)((function(){return console.log("use new provider:",b," endpoint:",m),"http://solongwallet.com"===b?new k(b,m):new o.a(b,m)}),[b,m]),h=Object(r.useState)(!1),g=Object(a.a)(h,2),w=g[0],j=g[1];return Object(r.useEffect)((function(){return console.log("\u6b63\u5728\u8fde\u63a5\u60a8\u7684\u94b1\u5305..."),v.on("connect",(function(){console.log("\u5df2\u8fde\u63a5"),j(!0);var e=v.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(i.a)({message:"\u94b1\u5305\u72b6\u6001",description:"\u5df2\u8fde\u63a5\u5230\u94b1\u5305\uff1a "+t})})),v.on("disconnect",(function(){j(!1),Object(i.a)({message:"\u94b1\u5305\u72b6\u6001",description:"\u5df2\u65ad\u5f00\u94b1\u5305\u8fde\u63a5"})})),function(){v.disconnect(),j(!1)}}),[v]),c.a.createElement(E.Provider,{value:{wallet:v,connected:w,providerUrl:b,setProviderUrl:y,providerName:null!==(t=null===(n=O.find((function(e){return e.url===b})))||void 0===n?void 0:n.name)&&void 0!==t?t:b}},d)}function A(){var e=Object(r.useContext)(E);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},88:function(e,t,n){"use strict";var a=n(372);n.o(a,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return a.TokenSwapLayout})),n.o(a,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return a.TokenSwapLayoutLegacyV0})),n.o(a,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return a.createInitSwapInstruction})),n.o(a,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return a.depositInstruction})),n.o(a,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return a.swapInstruction})),n.o(a,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return a.withdrawInstruction}));var r=n(373);n.o(r,"TokenSwapLayout")&&n.d(t,"TokenSwapLayout",(function(){return r.TokenSwapLayout})),n.o(r,"TokenSwapLayoutLegacyV0")&&n.d(t,"TokenSwapLayoutLegacyV0",(function(){return r.TokenSwapLayoutLegacyV0})),n.o(r,"createInitSwapInstruction")&&n.d(t,"createInitSwapInstruction",(function(){return r.createInitSwapInstruction})),n.o(r,"depositInstruction")&&n.d(t,"depositInstruction",(function(){return r.depositInstruction})),n.o(r,"swapInstruction")&&n.d(t,"swapInstruction",(function(){return r.swapInstruction})),n.o(r,"withdrawInstruction")&&n.d(t,"withdrawInstruction",(function(){return r.withdrawInstruction}));var c=n(374);n.d(t,"TokenSwapLayout",(function(){return c.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return c.b})),n.d(t,"createInitSwapInstruction",(function(){return c.c})),n.d(t,"depositInstruction",(function(){return c.d})),n.d(t,"swapInstruction",(function(){return c.e})),n.d(t,"withdrawInstruction",(function(){return c.f}))},977:function(e,t,n){}},[[515,1,2]]]);